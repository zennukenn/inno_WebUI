# AI思考过程显示功能使用指南

## 功能概述

VLLM Chat现在支持在AI回答中显示思考过程，让用户能够了解AI的推理步骤。思考部分和正式回答使用不同的UI样式显示，提供更好的用户体验。

## 支持的标记格式

### 1. XML风格标记
```
<thinking>
这里是AI的思考过程...
可以包含多行内容
支持Markdown格式
</thinking>

这里是正式的回答内容...
```

### 2. 中文标记
```
【思考】
这里是AI的思考过程...
可以包含多行内容
支持Markdown格式
【/思考】

这里是正式的回答内容...
```

## UI样式特点

### 思考部分样式
- **背景色**：浅灰色渐变背景
- **字体样式**：斜体显示
- **颜色**：较浅的灰色文字
- **交互**：默认折叠，点击标题栏可展开/收起
- **图标**：带有灯泡图标表示思考
- **动画**：展开/收起时有滑动动画效果

### 正式回答样式
- **背景色**：正常的消息背景
- **字体样式**：正常字体
- **颜色**：正常的文字颜色
- **格式**：完整的Markdown渲染支持

## 使用示例

### 示例1：技术问题回答
```
<thinking>
用户问的是关于React性能优化的问题。我需要从以下几个方面来回答：
1. 组件优化 - memo, useMemo, useCallback
2. 代码分割 - lazy loading
3. 状态管理优化
4. 渲染优化

我应该提供具体的代码示例，而不是只说理论。
</thinking>

# React性能优化最佳实践

React应用的性能优化可以从多个维度进行...

## 组件优化
使用React.memo来避免不必要的重新渲染：

```javascript
const MyComponent = React.memo(({ data }) => {
  return <div>{data.name}</div>;
});
```
```

### 示例2：问题分析
```
【思考】
这个错误信息显示是CORS问题。用户可能是前端开发者，遇到了跨域请求被阻止的情况。

我需要解释：
1. 什么是CORS
2. 为什么会出现这个错误
3. 如何解决（前端和后端两种方案）
4. 开发环境的临时解决方案

要给出具体可操作的解决步骤。
【/思考】

# CORS错误解决方案

CORS（跨源资源共享）错误是Web开发中常见的问题...

## 问题原因
浏览器的同源策略阻止了跨域请求...

## 解决方案
### 后端解决（推荐）
在服务器端添加CORS头...
```

## 技术实现

### 前端组件结构
```
AIResponse.svelte
├── 解析思考标记
├── 思考部分（可折叠）
│   ├── 标题栏（带图标和状态）
│   └── 内容区域（斜体样式）
└── 正式回答部分（正常样式）
```

### 解析逻辑
1. 使用正则表达式匹配思考标记
2. 提取思考内容和正式回答内容
3. 分别渲染为不同的UI组件
4. 支持Markdown渲染

### 样式特性
- 响应式设计，适配移动端
- 深色模式支持
- 平滑的展开/收起动画
- 悬停效果和交互反馈

## 开发者使用建议

### 1. 何时使用思考标记
- 复杂问题需要多步推理时
- 需要展示分析过程时
- 教学场景，帮助用户理解思路
- 调试AI推理过程时

### 2. 思考内容建议
- 保持简洁明了
- 使用结构化的思考步骤
- 可以包含假设和推理过程
- 避免过于冗长的内容

### 3. 最佳实践
- 思考部分应该对理解答案有帮助
- 正式回答应该是完整和独立的
- 保持思考过程的逻辑性
- 适当使用Markdown格式化

## 用户体验

### 交互方式
- 点击思考标题栏展开/收起
- 键盘支持（空格键或回车键）
- 清晰的视觉状态指示
- 平滑的动画过渡

### 视觉层次
- 思考部分视觉权重较低
- 正式回答突出显示
- 清晰的内容分区
- 一致的设计语言

这个功能让AI的回答更加透明和教育性，用户可以选择是否查看AI的思考过程，提供了更好的交互体验。
