import{S as du,i as cu,s as Eu,n as uu,d as c,b as U,c as r,C as s,e as f,f as v,h as y,F as gu,j as h,k as x,H as fu,a as hu,o as L,p as vu,m as K,q as Cu,G as Bu,I as J,J as P,g as Du,K as G,t as pu,L as au,M as mu,y as O,A as X,B as Q,z as Y}from"../chunks/CIdRdH2t.js";import"../chunks/IHki7fMi.js";import{r as nu,s as lu}from"../chunks/AvMoPzej.js";function ou(g){let u,t,n,l,a,F,e,o="AI思考过程",d,i,p=g[2]?"点击收起":"点击展开",m,C,B,A,w,S,I,H,E=g[2]&&iu(g);return{c(){u=h("div"),t=h("button"),n=h("div"),l=G("svg"),a=G("path"),F=x(),e=h("span"),e.textContent=o,d=x(),i=h("span"),m=pu(p),C=x(),B=G("svg"),A=G("path"),S=x(),E&&E.c(),this.h()},l(D){u=f(D,"DIV",{class:!0});var b=v(u);t=f(b,"BUTTON",{class:!0});var R=v(t);n=f(R,"DIV",{class:!0});var k=v(n);l=J(k,"svg",{class:!0,fill:!0,stroke:!0,viewBox:!0});var V=v(l);a=J(V,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),v(a).forEach(c),V.forEach(c),F=y(k),e=f(k,"SPAN",{class:!0,"data-svelte-h":!0}),P(e)!=="svelte-509vli"&&(e.textContent=o),d=y(k),i=f(k,"SPAN",{class:!0});var M=v(i);m=Du(M,p),M.forEach(c),k.forEach(c),C=y(R),B=J(R,"svg",{class:!0,fill:!0,stroke:!0,viewBox:!0});var j=v(B);A=J(j,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),v(A).forEach(c),j.forEach(c),R.forEach(c),S=y(b),E&&E.l(b),b.forEach(c),this.h()},h(){s(a,"stroke-linecap","round"),s(a,"stroke-linejoin","round"),s(a,"stroke-width","2"),s(a,"d","M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"),s(l,"class","w-4 h-4 text-gray-500 dark:text-gray-400"),s(l,"fill","none"),s(l,"stroke","currentColor"),s(l,"viewBox","0 0 24 24"),s(e,"class","text-sm font-medium text-gray-600 dark:text-gray-300"),s(i,"class","text-xs text-gray-400 dark:text-gray-500 bg-gray-200 dark:bg-gray-600 px-2 py-0.5 rounded-full"),s(n,"class","flex items-center space-x-2"),s(A,"stroke-linecap","round"),s(A,"stroke-linejoin","round"),s(A,"stroke-width","2"),s(A,"d","M19 9l-7 7-7-7"),s(B,"class",w="w-4 h-4 text-gray-400 transition-transform duration-200 "+(g[2]?"rotate-180":"")),s(B,"fill","none"),s(B,"stroke","currentColor"),s(B,"viewBox","0 0 24 24"),s(t,"class","thinking-header w-full flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700/50 rounded-t-lg border border-gray-200 dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors svelte-1jlyhx"),s(u,"class","thinking-section mb-4 svelte-1jlyhx")},m(D,b){U(D,u,b),r(u,t),r(t,n),r(n,l),r(l,a),r(n,F),r(n,e),r(n,d),r(n,i),r(i,m),r(t,C),r(t,B),r(B,A),r(u,S),E&&E.m(u,null),I||(H=Bu(t,"click",g[8]),I=!0)},p(D,b){b&4&&p!==(p=D[2]?"点击收起":"点击展开")&&hu(m,p),b&4&&w!==(w="w-4 h-4 text-gray-400 transition-transform duration-200 "+(D[2]?"rotate-180":""))&&s(B,"class",w),D[2]?E?(E.p(D,b),b&4&&L(E,1)):(E=iu(D),E.c(),L(E,1),E.m(u,null)):E&&(vu(),K(E,1,1,()=>{E=null}),Cu())},d(D){D&&c(u),E&&E.d(),I=!1,H()}}}function iu(g){let u,t,n,l,a,F;return{c(){u=h("div"),t=h("div"),n=h("div"),l=new fu(!1),this.h()},l(e){u=f(e,"DIV",{class:!0});var o=v(u);t=f(o,"DIV",{class:!0});var d=v(t);n=f(d,"DIV",{class:!0});var i=v(n);l=gu(i,!1),i.forEach(c),d.forEach(c),o.forEach(c),this.h()},h(){l.a=null,s(n,"class","prose prose-sm prose-gray dark:prose-invert max-w-none thinking-prose"),s(t,"class","p-4 bg-gray-25 dark:bg-gray-800/30 svelte-1jlyhx"),s(u,"class","thinking-content border-l border-r border-b border-gray-200 dark:border-gray-600 rounded-b-lg svelte-1jlyhx")},m(e,o){U(e,u,o),r(u,t),r(t,n),l.m(g[4],n),F=!0},p(e,o){(!F||o&16)&&l.p(e[4])},i(e){F||(e&&mu(()=>{F&&(a||(a=au(u,lu,{duration:300},!0)),a.run(1))}),F=!0)},o(e){e&&(a||(a=au(u,lu,{duration:300},!1)),a.run(0)),F=!1},d(e){e&&c(u),e&&a&&a.end()}}}function Fu(g){let u;return{c(){u=h("span"),this.h()},l(t){u=f(t,"SPAN",{class:!0}),v(u).forEach(c),this.h()},h(){s(u,"class","inline-block w-2 h-5 bg-blue-500 animate-pulse ml-1 rounded-sm")},m(t,n){U(t,u,n)},d(t){t&&c(u)}}}function Au(g){let u,t,n,l,a,F,e=g[1]&&ou(g),o=g[0]&&Fu();return{c(){u=h("div"),e&&e.c(),t=x(),n=h("div"),l=h("div"),a=new fu(!1),F=x(),o&&o.c(),this.h()},l(d){u=f(d,"DIV",{class:!0});var i=v(u);e&&e.l(i),t=y(i),n=f(i,"DIV",{class:!0});var p=v(n);l=f(p,"DIV",{class:!0});var m=v(l);a=gu(m,!1),F=y(m),o&&o.l(m),m.forEach(c),p.forEach(c),i.forEach(c),this.h()},h(){a.a=F,s(l,"class","prose prose-gray dark:prose-invert max-w-none response-prose"),s(n,"class","response-section"),s(u,"class","ai-response")},m(d,i){U(d,u,i),e&&e.m(u,null),r(u,t),r(u,n),r(n,l),a.m(g[3],l),r(l,F),o&&o.m(l,null)},p(d,[i]){d[1]?e?e.p(d,i):(e=ou(d),e.c(),e.m(u,t)):e&&(e.d(1),e=null),i&8&&a.p(d[3]),d[0]?o||(o=Fu(),o.c(),o.m(l,null)):o&&(o.d(1),o=null)},i:uu,o:uu,d(d){d&&c(u),e&&e.d(),o&&o.d()}}}function bu(g,u,t){let n,l,a,{content:F}=u,{isStreaming:e=!1}=u,o=!1,d="",i="";function p(C){const B=/(?:<thinking>([\s\S]*?)<\/thinking>|【思考】([\s\S]*?)【\/思考】)/gi,A=[...C.matchAll(B)];A.length>0?(t(6,d=A.map(w=>w[1]||w[2]).join(`

`).trim()),t(7,i=C.replace(B,"").trim())):(t(6,d=""),t(7,i=C))}const m=()=>t(2,o=!o);return g.$$set=C=>{"content"in C&&t(5,F=C.content),"isStreaming"in C&&t(0,e=C.isStreaming)},g.$$.update=()=>{g.$$.dirty&32&&p(F),g.$$.dirty&64&&t(1,n=d.length>0),g.$$.dirty&66&&t(4,l=n?nu(d):""),g.$$.dirty&128&&t(3,a=nu(i))},[e,n,o,a,l,F,d,i,m]}class Z extends du{constructor(u){super(),cu(this,u,bu,Au,Eu,{content:5,isStreaming:0})}}function ku(g){let u,t,n="AI回答样式演示",l,a,F,e,o="示例1：使用 <thinking> 标签",d,i,p,m,C,B,A="示例2：使用【思考】标签",w,S,I,H,E,D,b="示例3：流式输入效果",R,k,V,M,j,eu='<h3 class="text-lg font-semibold mb-3 text-blue-800 dark:text-blue-200">💡 使用说明</h3> <div class="text-sm text-blue-700 dark:text-blue-300 space-y-2"><p><strong>思考标记支持：</strong></p> <ul class="list-disc list-inside space-y-1 ml-4"><li><code>&lt;thinking&gt;...&lt;/thinking&gt;</code> - XML风格标记</li> <li><code>【思考】...【/思考】</code> - 中文标记</li></ul> <p class="mt-3"><strong>功能特性：</strong></p> <ul class="list-disc list-inside space-y-1 ml-4"><li>思考部分默认折叠，点击可展开</li> <li>思考内容使用斜体和灰色显示</li> <li>正式回答使用正常样式</li> <li>支持Markdown渲染</li> <li>支持流式输入效果</li></ul></div>',$;return p=new Z({props:{content:g[0]}}),I=new Z({props:{content:g[1]}}),V=new Z({props:{content:"这是一个正在输入的AI回答...",isStreaming:!0}}),{c(){u=h("div"),t=h("h1"),t.textContent=n,l=x(),a=h("div"),F=h("div"),e=h("h2"),e.textContent=o,d=x(),i=h("div"),Y(p.$$.fragment),m=x(),C=h("div"),B=h("h2"),B.textContent=A,w=x(),S=h("div"),Y(I.$$.fragment),H=x(),E=h("div"),D=h("h2"),D.textContent=b,R=x(),k=h("div"),Y(V.$$.fragment),M=x(),j=h("div"),j.innerHTML=eu,this.h()},l(_){u=f(_,"DIV",{class:!0});var T=v(u);t=f(T,"H1",{class:!0,"data-svelte-h":!0}),P(t)!=="svelte-1tslsoy"&&(t.textContent=n),l=y(T),a=f(T,"DIV",{class:!0});var N=v(a);F=f(N,"DIV",{class:!0});var z=v(F);e=f(z,"H2",{class:!0,"data-svelte-h":!0}),P(e)!=="svelte-vwawco"&&(e.textContent=o),d=y(z),i=f(z,"DIV",{class:!0});var tu=v(i);Q(p.$$.fragment,tu),tu.forEach(c),z.forEach(c),m=y(N),C=f(N,"DIV",{class:!0});var W=v(C);B=f(W,"H2",{class:!0,"data-svelte-h":!0}),P(B)!=="svelte-1o6bp01"&&(B.textContent=A),w=y(W),S=f(W,"DIV",{class:!0});var su=v(S);Q(I.$$.fragment,su),su.forEach(c),W.forEach(c),H=y(N),E=f(N,"DIV",{class:!0});var q=v(E);D=f(q,"H2",{class:!0,"data-svelte-h":!0}),P(D)!=="svelte-1gv83wd"&&(D.textContent=b),R=y(q),k=f(q,"DIV",{class:!0});var ru=v(k);Q(V.$$.fragment,ru),ru.forEach(c),q.forEach(c),N.forEach(c),M=y(T),j=f(T,"DIV",{class:!0,"data-svelte-h":!0}),P(j)!=="svelte-1hu7eyb"&&(j.innerHTML=eu),T.forEach(c),this.h()},h(){s(t,"class","text-3xl font-bold mb-8 text-gray-900 dark:text-white"),s(e,"class","text-xl font-semibold mb-4 text-gray-800 dark:text-gray-200"),s(i,"class","bg-gray-50 dark:bg-gray-700 rounded-lg p-4"),s(F,"class","bg-white dark:bg-gray-800 rounded-lg p-6 shadow-lg border border-gray-200 dark:border-gray-700"),s(B,"class","text-xl font-semibold mb-4 text-gray-800 dark:text-gray-200"),s(S,"class","bg-gray-50 dark:bg-gray-700 rounded-lg p-4"),s(C,"class","bg-white dark:bg-gray-800 rounded-lg p-6 shadow-lg border border-gray-200 dark:border-gray-700"),s(D,"class","text-xl font-semibold mb-4 text-gray-800 dark:text-gray-200"),s(k,"class","bg-gray-50 dark:bg-gray-700 rounded-lg p-4"),s(E,"class","bg-white dark:bg-gray-800 rounded-lg p-6 shadow-lg border border-gray-200 dark:border-gray-700"),s(a,"class","space-y-8"),s(j,"class","mt-12 bg-blue-50 dark:bg-blue-900/20 rounded-lg p-6 border border-blue-200 dark:border-blue-800"),s(u,"class","container mx-auto p-8 max-w-4xl svelte-1lehx3z")},m(_,T){U(_,u,T),r(u,t),r(u,l),r(u,a),r(a,F),r(F,e),r(F,d),r(F,i),X(p,i,null),r(a,m),r(a,C),r(C,B),r(C,w),r(C,S),X(I,S,null),r(a,H),r(a,E),r(E,D),r(E,R),r(E,k),X(V,k,null),r(u,M),r(u,j),$=!0},p:uu,i(_){$||(L(p.$$.fragment,_),L(I.$$.fragment,_),L(V.$$.fragment,_),$=!0)},o(_){K(p.$$.fragment,_),K(I.$$.fragment,_),K(V.$$.fragment,_),$=!1},d(_){_&&c(u),O(p),O(I),O(V)}}}function _u(g){return[`<thinking>
用户询问如何优化网站性能，这是一个很常见的问题。我需要从多个角度来回答：

1. 前端优化 - 代码分割、懒加载、图片优化等
2. 后端优化 - 缓存、数据库优化、CDN等  
3. 网络优化 - HTTP/2、压缩等
4. 监控和测量 - 性能指标、工具等

我应该提供具体可行的建议，而不是泛泛而谈。
</thinking>

# 网站性能优化指南

网站性能优化是一个系统性工程，需要从多个维度进行考虑。以下是一些关键的优化策略：

## 🚀 前端优化

### 代码优化
- **代码分割**：使用动态导入(dynamic imports)按需加载代码
- **Tree Shaking**：移除未使用的代码
- **压缩混淆**：使用工具如Terser压缩JavaScript代码

### 资源优化
- **图片优化**：
  - 使用现代格式如WebP、AVIF
  - 实现响应式图片
  - 添加懒加载
- **字体优化**：使用font-display: swap，预加载关键字体

## ⚡ 后端优化

### 缓存策略
- **浏览器缓存**：设置合适的Cache-Control头
- **CDN缓存**：使用内容分发网络
- **服务器缓存**：Redis、Memcached等

### 数据库优化
- 添加适当的索引
- 优化查询语句
- 使用连接池

## 📊 性能监控

使用工具如：
- **Lighthouse**：综合性能评估
- **WebPageTest**：详细的性能分析
- **Core Web Vitals**：关注用户体验指标

> 💡 **提示**：性能优化是一个持续的过程，需要定期监控和调整。

记住，**测量比猜测更重要**！`,`【思考】
这个问题涉及到React的状态管理。用户可能是初学者，我需要解释清楚useState的工作原理，包括：

1. 状态的异步更新特性
2. 函数式更新的概念
3. 为什么直接修改状态不会触发重新渲染
4. 提供具体的代码示例

我应该用简单易懂的语言来解释这些概念。
【/思考】

# React useState 详解

\`useState\` 是React中最基础也是最重要的Hook之一。让我来详细解释它的工作原理。

## 基本用法

\`\`\`javascript
import React, { useState } from 'react';

function Counter() {
  const [count, setCount] = useState(0);
  
  return (
    <div>
      <p>当前计数: {count}</p>
      <button onClick={() => setCount(count + 1)}>
        增加
      </button>
    </div>
  );
}
\`\`\`

## 🔑 关键概念

### 1. 状态是异步更新的
React会批量处理状态更新，这意味着状态不会立即改变：

\`\`\`javascript
function handleClick() {
  setCount(count + 1);
  console.log(count); // 这里打印的仍然是旧值！
}
\`\`\`

### 2. 函数式更新
当新状态依赖于前一个状态时，使用函数式更新更安全：

\`\`\`javascript
// ✅ 推荐
setCount(prevCount => prevCount + 1);

// ❌ 可能有问题
setCount(count + 1);
\`\`\`

### 3. 对象和数组的更新
状态是不可变的，必须创建新的对象或数组：

\`\`\`javascript
// 对象更新
setUser(prevUser => ({
  ...prevUser,
  name: 'New Name'
}));

// 数组更新
setItems(prevItems => [...prevItems, newItem]);
\`\`\`

## ⚠️ 常见陷阱

1. **直接修改状态**：永远不要直接修改状态对象
2. **在循环中多次调用setState**：可能导致意外的结果
3. **忘记状态更新是异步的**：不要期望状态立即改变

希望这个解释对你有帮助！`]}class Iu extends du{constructor(u){super(),cu(this,u,_u,ku,Eu,{})}}export{Iu as component};
