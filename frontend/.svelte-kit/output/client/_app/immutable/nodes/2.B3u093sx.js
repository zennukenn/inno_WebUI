var Br=Object.defineProperty;var Nr=(n,e,r)=>e in n?Br(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r;var Kt=(n,e,r)=>Nr(n,typeof e!="symbol"?e+"":e,r);import{S as Ue,i as qe,s as ze,d,m as le,o as ee,p as $e,q as et,b as L,G as X,r as Ee,a1 as Ir,N as ct,L as it,M as It,a as ne,c,C as o,e as p,f as v,J as F,h as D,g as Q,j as g,k as S,t as Z,E as ht,a2 as Dr,y as je,a3 as be,a4 as Sr,A as He,T as Ht,I as de,B as Pe,K as ue,z as Oe,l as ge,v as St,n as ce,F as st,H as lt,$ as Vr,u as jr,D as Gt,a5 as Pt,a6 as Hr,a7 as Wt,_ as Pr,a8 as Or}from"../chunks/CIdRdH2t.js";import"../chunks/IHki7fMi.js";import{w as Re}from"../chunks/hAjrpi1q.js";import{e as tt,a as Lr,d as Ur,f as Ce,o as qr}from"../chunks/DyFjdyve.js";import{a as Xt,f as Yt,t as Qt,b as Zt,r as rt,s as $t,c as er,d as zr,i as Rr,e as Fr,g as Jr}from"../chunks/AvMoPzej.js";const Mt=Re([]),tr=Re(null),Dt=Re(null),ut=Re([]),dt=Re(!1),ft=Re(!1),Tt=Re(!0),rr=Re(!1),xe=Re({model:"default",temperature:.7,maxTokens:2048,systemPrompt:"",theme:"dark",vllmApiUrl:"http://localhost:8000/v1",vllmApiKey:""}),Ze=Re({connected:!1,error:void 0,models:[]}),jt={},Kr=(jt==null?void 0:jt.VITE_API_BASE_URL)||"http://localhost:8080",Ne={CHATS:"/api/chats",CHAT_COMPLETION:"/api/chat/completion",MODELS:"/api/models"};class Gr{constructor(e=Kr){Kt(this,"baseUrl");this.baseUrl=e}updateBaseUrl(e){this.baseUrl=e}async request(e,r={}){const t=`${this.baseUrl}${e}`;console.log("API Request:",{url:t,options:r});try{const s=await fetch(t,{headers:{"Content-Type":"application/json",...r.headers},...r});if(console.log("API Response status:",s.status),!s.ok){const a=await s.text();throw console.error("API Error response:",a),new Error(`HTTP ${s.status}: ${a}`)}const l=await s.json();return console.log("API Response data:",l),{success:!0,data:l}}catch(s){return console.error("API request failed:",s),{success:!1,error:s instanceof Error?s.message:"Unknown error"}}}async createChat(e){return this.request(Ne.CHATS,{method:"POST",body:JSON.stringify(e)})}async getChats(e=50,r=0){return this.request(`${Ne.CHATS}?limit=${e}&offset=${r}`)}async getChat(e){return this.request(`${Ne.CHATS}/${e}`)}async updateChat(e,r){return this.request(`${Ne.CHATS}/${e}`,{method:"PUT",body:JSON.stringify(r)})}async deleteChat(e){return this.request(`${Ne.CHATS}/${e}`,{method:"DELETE"})}async addMessage(e,r){return this.request(`${Ne.CHATS}/${e}/messages`,{method:"POST",body:JSON.stringify(r)})}async getMessages(e){return this.request(`${Ne.CHATS}/${e}/messages`)}async searchChats(e,r=20){return this.request(`${Ne.CHATS}/search?q=${encodeURIComponent(e)}&limit=${r}`)}async chatCompletion(e){return this.request(Ne.CHAT_COMPLETION,{method:"POST",body:JSON.stringify(e)})}async chatCompletionStream(e){try{const r=await fetch(`${this.baseUrl}${Ne.CHAT_COMPLETION}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...e,stream:!0})});if(!r.ok)throw new Error(`HTTP ${r.status}: ${r.statusText}`);return r.body}catch(r){return console.error("Stream request failed:",r),null}}async getModels(){return this.request("/api/models")}async addModel(e){return this.request("/api/models/add",{method:"POST",body:JSON.stringify(e)})}async removeModel(e){return this.request(`/api/models/${e}`,{method:"DELETE"})}async getModelConfig(e){return this.request(`/api/models/${e}/config`)}async testModel(e){return this.request(`/api/models/${e}/test`,{method:"POST"})}async healthCheck(){return this.request("/api/chat/health")}async testVllmConnection(e,r){try{const t={"Content-Type":"application/json"};r&&(t.Authorization=`Bearer ${r}`);const s=await fetch(`${e}/models`,{method:"GET",headers:t});if(!s.ok)throw new Error(`HTTP ${s.status}: ${s.statusText}`);return{success:!0,data:{models:(await s.json()).data||[],connected:!0}}}catch(t){console.error("Direct VLLM connection test failed:",t);try{const s=await this.request("/api/chat/test-connection",{method:"POST",body:JSON.stringify({vllm_url:e,api_key:r})});if(s.success)return s;throw new Error(s.error||"Backend connection test failed")}catch(s){return console.error("Backend VLLM connection test failed:",s),{success:!1,error:t instanceof Error?t.message:"Connection failed"}}}}}const Qe=new Gr;function sr(n){let e,r,t,s='<div class="flex items-center space-x-4"><div class="flex-shrink-0"><div class="w-12 h-12 rounded-full bg-red-100 dark:bg-red-900/30 flex items-center justify-center animate-pulse svelte-3ja166"><svg class="w-6 h-6 text-red-600 dark:text-red-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg></div></div> <div class="flex-1 min-w-0"><h3 class="text-lg font-semibold text-gray-900 dark:text-white">Delete Chat</h3> <p class="text-sm text-red-600 dark:text-red-400 mt-1">This action cannot be undone</p></div></div>',l,a,i,u,f,h,m,x,b,_,k,y,w='<div class="flex items-start space-x-3"><svg class="w-5 h-5 text-red-500 mt-0.5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"></path></svg> <div class="text-sm"><p class="font-medium text-red-800 dark:text-red-200">All messages will be permanently lost</p> <p class="text-red-700 dark:text-red-300 mt-1">This includes all conversation history, attachments, and any shared content in this chat.</p></div></div>',C,A,N,E="Cancel",V,B,j='<span class="flex items-center space-x-2"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg> <span>Delete Chat</span></span>',z,H,M,O,R;return{c(){e=g("div"),r=g("div"),t=g("div"),t.innerHTML=s,l=S(),a=g("div"),i=g("div"),u=g("p"),f=Z(`Are you sure you want to delete the chat 
						`),h=g("span"),m=Z('"'),x=Z(n[1]),b=Z('"'),_=Z("?"),k=S(),y=g("div"),y.innerHTML=w,C=S(),A=g("div"),N=g("button"),N.textContent=E,V=S(),B=g("button"),B.innerHTML=j,this.h()},l(J){e=p(J,"DIV",{class:!0});var K=v(e);r=p(K,"DIV",{class:!0});var q=v(r);t=p(q,"DIV",{class:!0,"data-svelte-h":!0}),F(t)!=="svelte-8dfzm2"&&(t.innerHTML=s),l=D(q),a=p(q,"DIV",{class:!0});var G=v(a);i=p(G,"DIV",{class:!0});var Y=v(i);u=p(Y,"P",{class:!0});var oe=v(u);f=Q(oe,`Are you sure you want to delete the chat 
						`),h=p(oe,"SPAN",{class:!0});var I=v(h);m=Q(I,'"'),x=Q(I,n[1]),b=Q(I,'"'),I.forEach(d),_=Q(oe,"?"),oe.forEach(d),k=D(Y),y=p(Y,"DIV",{class:!0,"data-svelte-h":!0}),F(y)!=="svelte-1b1ehty"&&(y.innerHTML=w),Y.forEach(d),G.forEach(d),C=D(q),A=p(q,"DIV",{class:!0});var T=v(A);N=p(T,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),F(N)!=="svelte-106nb5f"&&(N.textContent=E),V=D(T),B=p(T,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),F(B)!=="svelte-1p6y99z"&&(B.innerHTML=j),T.forEach(d),q.forEach(d),K.forEach(d),this.h()},h(){o(t,"class","px-6 py-5 bg-gradient-to-r from-red-50 to-pink-50 dark:from-red-900/20 dark:to-pink-900/20 border-b border-red-100 dark:border-red-800"),o(h,"class","font-semibold text-gray-900 dark:text-white"),o(u,"class","text-gray-700 dark:text-gray-300 leading-relaxed"),o(y,"class","bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4"),o(i,"class","space-y-4"),o(a,"class","px-6 py-5"),o(N,"type","button"),o(N,"class","px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-600 border border-gray-300 dark:border-gray-500 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 transition-all duration-200"),o(B,"type","button"),o(B,"class","px-4 py-2 text-sm font-medium text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 rounded-lg transition-all duration-200 hover:scale-105 transform"),o(A,"class","px-6 py-4 bg-gray-50 dark:bg-gray-700/50 flex items-center justify-end space-x-3"),o(r,"class","bg-white dark:bg-gray-800 rounded-2xl shadow-2xl max-w-md w-full mx-4 overflow-hidden border border-gray-200 dark:border-gray-700"),o(e,"class","fixed inset-0 bg-black bg-opacity-50 backdrop-blur-sm z-50 flex items-center justify-center p-4 svelte-3ja166")},m(J,K){L(J,e,K),c(e,r),c(r,t),c(r,l),c(r,a),c(a,i),c(i,u),c(u,f),c(u,h),c(h,m),c(h,x),c(h,b),c(u,_),c(i,k),c(i,y),c(r,C),c(r,A),c(A,N),c(A,V),c(A,B),M=!0,O||(R=[X(N,"click",n[3]),X(B,"click",n[2]),X(e,"click",n[4])],O=!0)},p(J,K){(!M||K&2)&&ne(x,J[1])},i(J){M||(J&&It(()=>{M&&(z||(z=it(r,Xt,{duration:200,start:.95},!0)),z.run(1))}),J&&It(()=>{M&&(H||(H=it(e,Yt,{duration:200},!0)),H.run(1))}),M=!0)},o(J){J&&(z||(z=it(r,Xt,{duration:200,start:.95},!1)),z.run(0)),J&&(H||(H=it(e,Yt,{duration:200},!1)),H.run(0)),M=!1},d(J){J&&d(e),J&&z&&z.end(),J&&H&&H.end(),O=!1,ct(R)}}}function Wr(n){let e,r,t,s=n[0]&&sr(n);return{c(){s&&s.c(),e=Ee()},l(l){s&&s.l(l),e=Ee()},m(l,a){s&&s.m(l,a),L(l,e,a),r||(t=X(window,"keydown",n[5]),r=!0)},p(l,[a]){l[0]?s?(s.p(l,a),a&1&&ee(s,1)):(s=sr(l),s.c(),ee(s,1),s.m(e.parentNode,e)):s&&($e(),le(s,1,1,()=>{s=null}),et())},i(l){ee(s)},o(l){le(s)},d(l){l&&d(e),s&&s.d(l),r=!1,t()}}}function Xr(n,e,r){const t=Ir();let{isOpen:s=!1}=e,{chatTitle:l=""}=e;function a(){t("confirm"),r(0,s=!1)}function i(){t("cancel"),r(0,s=!1)}function u(h){h.target===h.currentTarget&&i()}function f(h){h.key==="Escape"?i():h.key==="Enter"&&a()}return n.$$set=h=>{"isOpen"in h&&r(0,s=h.isOpen),"chatTitle"in h&&r(1,l=h.chatTitle)},[s,l,a,i,u,f]}class Yr extends Ue{constructor(e){super(),qe(this,e,Xr,Wr,ze,{isOpen:0,chatTitle:1})}}function lr(n,e,r){const t=n.slice();return t[18]=e[r],t}function nr(n,e){let r,t,s,l,a=Qt(e[18].title,30)+"",i,u,f,h,m=Zt(new Date(e[18].updated_at||e[18].created_at||"").getTime()/1e3)+"",x,b,_,k,y='<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg>',w,C,A,N;function E(...B){return e[13](e[18],...B)}function V(){return e[14](e[18])}return{key:n,first:null,c(){r=g("div"),t=g("div"),s=g("div"),l=g("h3"),i=Z(a),f=S(),h=g("p"),x=Z(m),_=S(),k=g("button"),k.innerHTML=y,w=S(),this.h()},l(B){r=p(B,"DIV",{class:!0});var j=v(r);t=p(j,"DIV",{class:!0});var z=v(t);s=p(z,"DIV",{class:!0});var H=v(s);l=p(H,"H3",{class:!0});var M=v(l);i=Q(M,a),M.forEach(d),f=D(H),h=p(H,"P",{class:!0});var O=v(h);x=Q(O,m),O.forEach(d),H.forEach(d),_=D(z),k=p(z,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),F(k)!=="svelte-8yda32"&&(k.innerHTML=y),z.forEach(d),w=D(j),j.forEach(d),this.h()},h(){o(l,"class",u="text-sm font-medium "+(e[6]===e[18].id?"text-blue-700 dark:text-blue-300":"text-gray-900 dark:text-white")+" truncate"),o(h,"class",b="text-xs "+(e[6]===e[18].id?"text-blue-600 dark:text-blue-400":"text-gray-500 dark:text-gray-400")+" mt-1"),o(s,"class","flex-1 min-w-0"),o(k,"class","opacity-0 group-hover:opacity-100 p-1.5 rounded-md hover:bg-red-100 dark:hover:bg-red-900/20 transition-all duration-200 text-gray-400 hover:text-red-600 dark:hover:text-red-400 hover:scale-110 transform"),o(k,"title","Delete chat"),o(t,"class","flex items-start justify-between"),o(r,"class",C="p-3 rounded-lg cursor-pointer transition-all duration-200 group transform hover:scale-[1.01] "+(e[6]===e[18].id?"bg-blue-50 dark:bg-blue-900/20 border-l-4 border-blue-500 shadow-sm":"hover:bg-gray-50 dark:hover:bg-gray-700/50 hover:shadow-sm")),this.first=r},m(B,j){L(B,r,j),c(r,t),c(t,s),c(s,l),c(l,i),c(s,f),c(s,h),c(h,x),c(t,_),c(t,k),c(r,w),A||(N=[X(k,"click",E),X(r,"click",V)],A=!0)},p(B,j){e=B,j&8&&a!==(a=Qt(e[18].title,30)+"")&&ne(i,a),j&72&&u!==(u="text-sm font-medium "+(e[6]===e[18].id?"text-blue-700 dark:text-blue-300":"text-gray-900 dark:text-white")+" truncate")&&o(l,"class",u),j&8&&m!==(m=Zt(new Date(e[18].updated_at||e[18].created_at||"").getTime()/1e3)+"")&&ne(x,m),j&72&&b!==(b="text-xs "+(e[6]===e[18].id?"text-blue-600 dark:text-blue-400":"text-gray-500 dark:text-gray-400")+" mt-1")&&o(h,"class",b),j&72&&C!==(C="p-3 rounded-lg cursor-pointer transition-all duration-200 group transform hover:scale-[1.01] "+(e[6]===e[18].id?"bg-blue-50 dark:bg-blue-900/20 border-l-4 border-blue-500 shadow-sm":"hover:bg-gray-50 dark:hover:bg-gray-700/50 hover:shadow-sm"))&&o(r,"class",C)},d(B){B&&d(r),A=!1,ct(N)}}}function ar(n){let e,r,t='<svg class="w-8 h-8 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"></path></svg>',s,l,a=n[2]?"No chats found":"No chats yet",i,u,f=!n[2]&&or();return{c(){e=g("div"),r=g("div"),r.innerHTML=t,s=S(),l=g("p"),i=Z(a),u=S(),f&&f.c(),this.h()},l(h){e=p(h,"DIV",{class:!0});var m=v(e);r=p(m,"DIV",{class:!0,"data-svelte-h":!0}),F(r)!=="svelte-gb2i72"&&(r.innerHTML=t),s=D(m),l=p(m,"P",{class:!0});var x=v(l);i=Q(x,a),x.forEach(d),u=D(m),f&&f.l(m),m.forEach(d),this.h()},h(){o(r,"class","w-16 h-16 mx-auto mb-4 bg-gray-100 dark:bg-gray-700 rounded-full flex items-center justify-center"),o(l,"class","text-sm text-gray-500 dark:text-gray-400"),o(e,"class","p-8 text-center")},m(h,m){L(h,e,m),c(e,r),c(e,s),c(e,l),c(l,i),c(e,u),f&&f.m(e,null)},p(h,m){m&4&&a!==(a=h[2]?"No chats found":"No chats yet")&&ne(i,a),h[2]?f&&(f.d(1),f=null):f||(f=or(),f.c(),f.m(e,null))},d(h){h&&d(e),f&&f.d()}}}function or(n){let e,r="Start a new conversation to get started";return{c(){e=g("p"),e.textContent=r,this.h()},l(t){e=p(t,"P",{class:!0,"data-svelte-h":!0}),F(e)!=="svelte-1c2rx7r"&&(e.textContent=r),this.h()},h(){o(e,"class","text-xs text-gray-400 dark:text-gray-500 mt-1")},m(t,s){L(t,e,s)},d(t){t&&d(e)}}}function Qr(n){let e,r,t,s,l='<div class="w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center"><svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"></path></svg></div> <h1 class="text-lg font-semibold text-gray-900 dark:text-white">VLLM Chat</h1>',a,i,u='<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>',f,h,m='<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path></svg> <span>New Chat</span>',x,b,_,k,y,w,C,A,N,E,V=[],B=new Map,j,z,H,M,O,R,J,K=tt(n[3]);const q=I=>I[18].id;for(let I=0;I<K.length;I+=1){let T=lr(n,K,I),P=q(T);B.set(P,V[I]=nr(P,T))}let G=n[3].length===0&&ar(n);function Y(I){n[15](I)}let oe={chatTitle:n[5]};return n[4]!==void 0&&(oe.isOpen=n[4]),H=new Yr({props:oe}),ht.push(()=>Dr(H,"isOpen",Y)),H.$on("confirm",n[8]),H.$on("cancel",n[9]),{c(){e=g("div"),r=g("div"),t=g("div"),s=g("div"),s.innerHTML=l,a=S(),i=g("button"),i.innerHTML=u,f=S(),h=g("button"),h.innerHTML=m,x=S(),b=g("div"),_=g("div"),k=ue("svg"),y=ue("path"),w=S(),C=g("input"),A=S(),N=g("div"),E=g("div");for(let I=0;I<V.length;I+=1)V[I].c();j=S(),G&&G.c(),z=S(),Oe(H.$$.fragment),this.h()},l(I){e=p(I,"DIV",{class:!0});var T=v(e);r=p(T,"DIV",{class:!0});var P=v(r);t=p(P,"DIV",{class:!0});var $=v(t);s=p($,"DIV",{class:!0,"data-svelte-h":!0}),F(s)!=="svelte-2feria"&&(s.innerHTML=l),a=D($),i=p($,"BUTTON",{class:!0,"data-svelte-h":!0}),F(i)!=="svelte-1phmgvb"&&(i.innerHTML=u),$.forEach(d),f=D(P),h=p(P,"BUTTON",{class:!0,"data-svelte-h":!0}),F(h)!=="svelte-uxe5gb"&&(h.innerHTML=m),P.forEach(d),x=D(T),b=p(T,"DIV",{class:!0});var re=v(b);_=p(re,"DIV",{class:!0});var fe=v(_);k=de(fe,"svg",{class:!0,fill:!0,stroke:!0,viewBox:!0});var ae=v(k);y=de(ae,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),v(y).forEach(d),ae.forEach(d),w=D(fe),C=p(fe,"INPUT",{type:!0,placeholder:!0,class:!0}),fe.forEach(d),re.forEach(d),A=D(T),N=p(T,"DIV",{class:!0});var W=v(N);E=p(W,"DIV",{class:!0});var te=v(E);for(let ye=0;ye<V.length;ye+=1)V[ye].l(te);te.forEach(d),j=D(W),G&&G.l(W),W.forEach(d),T.forEach(d),z=D(I),Pe(H.$$.fragment,I),this.h()},h(){o(s,"class","flex items-center space-x-2"),o(i,"class","md:hidden p-1 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-500 dark:text-gray-400"),o(t,"class","flex items-center justify-between mb-4"),o(h,"class","w-full px-4 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors font-medium flex items-center justify-center space-x-2"),o(r,"class","p-4 border-b border-gray-200 dark:border-gray-700"),o(y,"stroke-linecap","round"),o(y,"stroke-linejoin","round"),o(y,"stroke-width","2"),o(y,"d","M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"),o(k,"class","absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"),o(k,"fill","none"),o(k,"stroke","currentColor"),o(k,"viewBox","0 0 24 24"),o(C,"type","text"),o(C,"placeholder","Search chats..."),o(C,"class","w-full pl-10 pr-4 py-2.5 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors"),o(_,"class","relative"),o(b,"class","p-4"),o(E,"class","space-y-1"),o(N,"class","flex-1 overflow-y-auto px-2"),o(e,"class","flex flex-col h-full bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700")},m(I,T){L(I,e,T),c(e,r),c(r,t),c(t,s),c(t,a),c(t,i),c(r,f),c(r,h),c(e,x),c(e,b),c(b,_),c(_,k),c(k,y),c(_,w),c(_,C),be(C,n[2]),c(e,A),c(e,N),c(N,E);for(let P=0;P<V.length;P+=1)V[P]&&V[P].m(E,null);c(N,j),G&&G.m(N,null),L(I,z,T),He(H,I,T),O=!0,R||(J=[X(i,"click",n[11]),X(h,"click",function(){Ht(n[0])&&n[0].apply(this,arguments)}),X(C,"input",n[12])],R=!0)},p(I,[T]){n=I,T&4&&C.value!==n[2]&&be(C,n[2]),T&202&&(K=tt(n[3]),V=Lr(V,T,q,1,n,K,B,E,Ur,nr,null,lr)),n[3].length===0?G?G.p(n,T):(G=ar(n),G.c(),G.m(N,null)):G&&(G.d(1),G=null);const P={};T&32&&(P.chatTitle=n[5]),!M&&T&16&&(M=!0,P.isOpen=n[4],Sr(()=>M=!1)),H.$set(P)},i(I){O||(ee(H.$$.fragment,I),O=!0)},o(I){le(H.$$.fragment,I),O=!1},d(I){I&&(d(e),d(z));for(let T=0;T<V.length;T+=1)V[T].d();G&&G.d(),je(H,I),R=!1,ct(J)}}}function Zr(n,e,r){let t,s;ge(n,Dt,E=>r(6,t=E)),ge(n,Mt,E=>r(10,s=E));let{onNewChat:l}=e,{onSelectChat:a}=e,i="",u=[],f=!1,h=null,m="";async function x(){const E=await Qe.getChats();E.success&&E.data&&Mt.set(E.data)}function b(E,V,B){B.stopPropagation(),h=E,r(5,m=V),r(4,f=!0)}async function _(){if(!h)return;(await Qe.deleteChat(h)).success&&(Mt.update(V=>V.filter(B=>B.id!==h)),t===h&&Dt.set(null)),h=null,r(5,m=""),r(4,f=!1)}function k(){h=null,r(5,m=""),r(4,f=!1)}St(()=>{x()});const y=()=>Tt.set(!1);function w(){i=this.value,r(2,i)}const C=(E,V)=>b(E.id,E.title,V),A=E=>a(E.id);function N(E){f=E,r(4,f)}return n.$$set=E=>{"onNewChat"in E&&r(0,l=E.onNewChat),"onSelectChat"in E&&r(1,a=E.onSelectChat)},n.$$.update=()=>{n.$$.dirty&1028&&(i.trim()?r(3,u=s.filter(E=>E.title.toLowerCase().includes(i.toLowerCase()))):r(3,u=s))},[l,a,i,u,f,m,t,b,_,k,s,y,w,C,A,N]}class $r extends Ue{constructor(e){super(),qe(this,e,Zr,Qr,ze,{onNewChat:0,onSelectChat:1})}}function es(n){const e=[],r=n.split(`
`);let t=null,s=!1,l="",a=!1;for(let m=0;m<r.length;m++){const x=r[m],b=x.trim();if(ts(b)){t&&(e.push(t),t=null),a=!0;continue}if(rs(b)){t&&t.type==="thinking"&&(e.push(t),t=null),a=!1;continue}const _=b.match(/^```(\w+)?/);if(_){t&&e.push(t),s?(t&&e.push(t),s=!1,l="",t=null):(s=!0,l=_[1]||"",t={type:"code",content:"",language:l});continue}if(s&&t){t.content+=(t.content?`
`:"")+x;continue}const k=b.match(/^(#{1,6})\s+(.+)/);if(k&&!a){t&&e.push(t),e.push({type:"heading",content:k[2],level:k[1].length}),t=null;continue}if(ss(b)&&!a){!t||t.type!=="list"?(t&&e.push(t),t={type:"list",content:x}):t.content+=`
`+x;continue}if(b.startsWith(">")&&!a){!t||t.type!=="quote"?(t&&e.push(t),t={type:"quote",content:x}):t.content+=`
`+x;continue}if(ls(b)){t&&e.push(t),e.push({type:"math",content:b}),t=null;continue}const y=a?"thinking":"main";!t||t.type!==y?(t&&e.push(t),t={type:y,content:x}):(b||t.content.trim())&&(t.content+=`
`+x)}t&&e.push(t);const i=e.filter(m=>m.content.trim()).map(m=>({...m,content:m.content.trim()})),u=i.some(m=>m.type==="thinking"),f=i.some(m=>m.type==="code"),h=i.filter(m=>m.type!=="thinking");return{blocks:i,hasThinking:u,hasCode:f,mainContentBlocks:h}}function ts(n){return[/^<thinking>/i,/^<think>/i,/^思考[:：]/i,/^让我想想/i,/^我需要思考/i,/^分析[:：]/i,/^reasoning[:：]/i,/^thought[:：]/i].some(r=>r.test(n))}function rs(n){return[/^<\/thinking>/i,/^<\/think>/i,/^思考结束/i,/^分析结束/i,/^结论[:：]/i,/^答案[:：]/i,/^回答[:：]/i].some(r=>r.test(n))}function ss(n){return/^[\s]*[-*+]\s+/.test(n)||/^[\s]*\d+\.\s+/.test(n)}function ls(n){return/^\$\$.*\$\$$/.test(n)||/^\\\[.*\\\]$/.test(n)}function ns(n){const{blocks:e,hasThinking:r,hasCode:t}=n,s=e.filter(u=>u.type==="main");if(s.length===0)return r?"思考过程":"内容";const a=s[0].content.substring(0,100),i=[];return r&&i.push("包含思考过程"),t&&i.push("包含代码"),i.length>0?`${a}... (${i.join("、")})`:a}function as(n){let e,r,t,s,l=n[1]&&ir();return{c(){e=g("div"),r=g("div"),t=new lt(!1),s=S(),l&&l.c(),this.h()},l(a){e=p(a,"DIV",{class:!0});var i=v(e);r=p(i,"DIV",{class:!0});var u=v(r);t=st(u,!1),s=D(u),l&&l.l(u),u.forEach(d),i.forEach(d),this.h()},h(){t.a=s,o(r,"class","prose prose-gray dark:prose-invert max-w-none prose-sm"),o(e,"class","main-content mb-4")},m(a,i){L(a,e,i),c(e,r),t.m(n[3],r),c(r,s),l&&l.m(r,null)},p(a,i){i&8&&t.p(a[3]),a[1]?l||(l=ir(),l.c(),l.m(r,null)):l&&(l.d(1),l=null)},d(a){a&&d(e),l&&l.d()}}}function os(n){let e,r,t,s=rt(n[0].content)+"";return{c(){e=g("div"),r=g("div"),t=new lt(!1),this.h()},l(l){e=p(l,"DIV",{class:!0});var a=v(e);r=p(a,"DIV",{class:!0});var i=v(r);t=st(i,!1),i.forEach(d),a.forEach(d),this.h()},h(){t.a=null,o(r,"class","text-center"),o(e,"class","math-block mb-4 p-4 bg-purple-50 dark:bg-purple-900/10 border border-purple-200 dark:border-purple-800 rounded-lg")},m(l,a){L(l,e,a),c(e,r),t.m(s,r)},p(l,a){a&1&&s!==(s=rt(l[0].content)+"")&&t.p(s)},d(l){l&&d(e)}}}function is(n){let e,r,t,s=rt(n[0].content)+"";return{c(){e=g("div"),r=g("div"),t=new lt(!1),this.h()},l(l){e=p(l,"DIV",{class:!0});var a=v(e);r=p(a,"DIV",{class:!0});var i=v(r);t=st(i,!1),i.forEach(d),a.forEach(d),this.h()},h(){t.a=null,o(r,"class","prose prose-sm max-w-none text-gray-700 dark:text-gray-300 italic"),o(e,"class","quote-block mb-4 pl-4 border-l-4 border-gray-400 dark:border-gray-600 bg-gray-50 dark:bg-gray-800/50 rounded-r-lg p-3")},m(l,a){L(l,e,a),c(e,r),t.m(s,r)},p(l,a){a&1&&s!==(s=rt(l[0].content)+"")&&t.p(s)},d(l){l&&d(e)}}}function cs(n){let e,r,t,s=rt(n[0].content)+"";return{c(){e=g("div"),r=g("div"),t=new lt(!1),this.h()},l(l){e=p(l,"DIV",{class:!0});var a=v(e);r=p(a,"DIV",{class:!0});var i=v(r);t=st(i,!1),i.forEach(d),a.forEach(d),this.h()},h(){t.a=null,o(r,"class","prose prose-sm max-w-none text-gray-800 dark:text-gray-200"),o(e,"class","list-block mb-4 pl-4 border-l-4 border-blue-200 dark:border-blue-800 bg-blue-50 dark:bg-blue-900/10 rounded-r-lg p-3")},m(l,a){L(l,e,a),c(e,r),t.m(s,r)},p(l,a){a&1&&s!==(s=rt(l[0].content)+"")&&t.p(s)},d(l){l&&d(e)}}}function ds(n){let e;function r(l,a){return l[0].level===1?bs:l[0].level===2?vs:l[0].level===3?ms:l[0].level===4?gs:l[0].level===5?ps:hs}let t=r(n),s=t(n);return{c(){e=g("div"),s.c(),this.h()},l(l){e=p(l,"DIV",{class:!0});var a=v(e);s.l(a),a.forEach(d),this.h()},h(){o(e,"class","heading-block mb-4")},m(l,a){L(l,e,a),s.m(e,null)},p(l,a){t===(t=r(l))&&s?s.p(l,a):(s.d(1),s=t(l),s&&(s.c(),s.m(e,null)))},d(l){l&&d(e),s.d()}}}function us(n){let e,r,t,s,l,a,i,u=(n[0].language||"Code")+"",f,h,m,x='<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>',b,_,k,y=n[0].content+"",w,C,A,N;return{c(){e=g("div"),r=g("div"),t=g("div"),s=ue("svg"),l=ue("path"),a=S(),i=g("span"),f=Z(u),h=S(),m=g("button"),m.innerHTML=x,b=S(),_=g("pre"),k=g("code"),w=Z(y),this.h()},l(E){e=p(E,"DIV",{class:!0});var V=v(e);r=p(V,"DIV",{class:!0});var B=v(r);t=p(B,"DIV",{class:!0});var j=v(t);s=de(j,"svg",{class:!0,fill:!0,stroke:!0,viewBox:!0});var z=v(s);l=de(z,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),v(l).forEach(d),z.forEach(d),a=D(j),i=p(j,"SPAN",{class:!0});var H=v(i);f=Q(H,u),H.forEach(d),j.forEach(d),h=D(B),m=p(B,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),F(m)!=="svelte-sa2l1t"&&(m.innerHTML=x),B.forEach(d),b=D(V),_=p(V,"PRE",{class:!0});var M=v(_);k=p(M,"CODE",{class:!0});var O=v(k);w=Q(O,y),O.forEach(d),M.forEach(d),V.forEach(d),this.h()},h(){o(l,"stroke-linecap","round"),o(l,"stroke-linejoin","round"),o(l,"stroke-width","2"),o(l,"d","M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"),o(s,"class","w-4 h-4 text-green-400"),o(s,"fill","none"),o(s,"stroke","currentColor"),o(s,"viewBox","0 0 24 24"),o(i,"class","text-sm font-medium text-gray-300"),o(t,"class","flex items-center space-x-2"),o(m,"class","p-1 rounded hover:bg-gray-600 text-gray-400 hover:text-white transition-colors"),o(m,"title","Copy code"),o(r,"class","flex items-center justify-between px-4 py-2 bg-gray-800 dark:bg-gray-700 border-b border-gray-700"),o(k,"class",C="language-"+(n[0].language||"text")+" svelte-in0eu3"),o(_,"class","p-4 text-sm text-gray-100 overflow-x-auto svelte-in0eu3"),o(e,"class","code-block mb-4 rounded-lg overflow-hidden bg-gray-900 dark:bg-gray-800 border border-gray-700 svelte-in0eu3")},m(E,V){L(E,e,V),c(e,r),c(r,t),c(t,s),c(s,l),c(t,a),c(t,i),c(i,f),c(r,h),c(r,m),c(e,b),c(e,_),c(_,k),c(k,w),A||(N=X(m,"click",n[5]),A=!0)},p(E,V){V&1&&u!==(u=(E[0].language||"Code")+"")&&ne(f,u),V&1&&y!==(y=E[0].content+"")&&ne(w,y),V&1&&C!==(C="language-"+(E[0].language||"text")+" svelte-in0eu3")&&o(k,"class",C)},d(E){E&&d(e),A=!1,N()}}}function fs(n){let e,r,t,s,l,a,i,u="思考过程",f,h,m,x=n[0].content.length+"",b,_,k,y,w,C,A,N,E,V=n[2]&&cr(n);return{c(){e=g("div"),r=g("button"),t=g("div"),s=ue("svg"),l=ue("path"),a=S(),i=g("span"),i.textContent=u,f=S(),h=g("span"),m=Z("("),b=Z(x),_=Z(" 字符)"),k=S(),y=ue("svg"),w=ue("path"),A=S(),V&&V.c(),this.h()},l(B){e=p(B,"DIV",{class:!0});var j=v(e);r=p(j,"BUTTON",{class:!0});var z=v(r);t=p(z,"DIV",{class:!0});var H=v(t);s=de(H,"svg",{class:!0,fill:!0,stroke:!0,viewBox:!0});var M=v(s);l=de(M,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),v(l).forEach(d),M.forEach(d),a=D(H),i=p(H,"SPAN",{class:!0,"data-svelte-h":!0}),F(i)!=="svelte-hinc9u"&&(i.textContent=u),f=D(H),h=p(H,"SPAN",{class:!0});var O=v(h);m=Q(O,"("),b=Q(O,x),_=Q(O," 字符)"),O.forEach(d),H.forEach(d),k=D(z),y=de(z,"svg",{class:!0,fill:!0,stroke:!0,viewBox:!0});var R=v(y);w=de(R,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),v(w).forEach(d),R.forEach(d),z.forEach(d),A=D(j),V&&V.l(j),j.forEach(d),this.h()},h(){o(l,"stroke-linecap","round"),o(l,"stroke-linejoin","round"),o(l,"stroke-width","2"),o(l,"d","M9.663 17h4.673M12 3v1m6.364-.636l-.707.707M21 12h-1M17.657 18.364l-.707-.707M12 21v-1m-6.364.636l.707-.707M3 12h1M6.343 5.636l.707.707"),o(s,"class","w-4 h-4 text-amber-600 dark:text-amber-400"),o(s,"fill","none"),o(s,"stroke","currentColor"),o(s,"viewBox","0 0 24 24"),o(i,"class","text-sm font-medium text-amber-800 dark:text-amber-200"),o(h,"class","text-xs text-amber-600 dark:text-amber-400"),o(t,"class","flex items-center space-x-2"),o(w,"stroke-linecap","round"),o(w,"stroke-linejoin","round"),o(w,"stroke-width","2"),o(w,"d","M19 9l-7 7-7-7"),o(y,"class",C="w-4 h-4 text-amber-600 dark:text-amber-400 transform transition-transform "+(n[2]?"rotate-180":"")),o(y,"fill","none"),o(y,"stroke","currentColor"),o(y,"viewBox","0 0 24 24"),o(r,"class","w-full px-4 py-3 flex items-center justify-between text-left hover:bg-amber-100 dark:hover:bg-amber-900/20 transition-colors"),o(e,"class","thinking-block mb-4 border border-amber-200 dark:border-amber-800 rounded-lg overflow-hidden bg-amber-50 dark:bg-amber-900/10 svelte-in0eu3")},m(B,j){L(B,e,j),c(e,r),c(r,t),c(t,s),c(s,l),c(t,a),c(t,i),c(t,f),c(t,h),c(h,m),c(h,b),c(h,_),c(r,k),c(r,y),c(y,w),c(e,A),V&&V.m(e,null),N||(E=X(r,"click",n[4]),N=!0)},p(B,j){j&1&&x!==(x=B[0].content.length+"")&&ne(b,x),j&4&&C!==(C="w-4 h-4 text-amber-600 dark:text-amber-400 transform transition-transform "+(B[2]?"rotate-180":""))&&o(y,"class",C),B[2]?V?(V.p(B,j),j&4&&ee(V,1)):(V=cr(B),V.c(),ee(V,1),V.m(e,null)):V&&($e(),le(V,1,1,()=>{V=null}),et())},d(B){B&&d(e),V&&V.d(),N=!1,E()}}}function ir(n){let e;return{c(){e=g("span"),this.h()},l(r){e=p(r,"SPAN",{class:!0}),v(e).forEach(d),this.h()},h(){o(e,"class","inline-block w-2 h-5 bg-gray-400 dark:bg-gray-300 animate-pulse ml-1 rounded-full")},m(r,t){L(r,e,t)},d(r){r&&d(e)}}}function hs(n){let e,r=n[0].content+"",t;return{c(){e=g("h6"),t=Z(r),this.h()},l(s){e=p(s,"H6",{class:!0});var l=v(e);t=Q(l,r),l.forEach(d),this.h()},h(){o(e,"class","text-xs font-semibold text-gray-900 dark:text-white mb-2")},m(s,l){L(s,e,l),c(e,t)},p(s,l){l&1&&r!==(r=s[0].content+"")&&ne(t,r)},d(s){s&&d(e)}}}function ps(n){let e,r=n[0].content+"",t;return{c(){e=g("h5"),t=Z(r),this.h()},l(s){e=p(s,"H5",{class:!0});var l=v(e);t=Q(l,r),l.forEach(d),this.h()},h(){o(e,"class","text-sm font-semibold text-gray-900 dark:text-white mb-2")},m(s,l){L(s,e,l),c(e,t)},p(s,l){l&1&&r!==(r=s[0].content+"")&&ne(t,r)},d(s){s&&d(e)}}}function gs(n){let e,r=n[0].content+"",t;return{c(){e=g("h4"),t=Z(r),this.h()},l(s){e=p(s,"H4",{class:!0});var l=v(e);t=Q(l,r),l.forEach(d),this.h()},h(){o(e,"class","text-base font-semibold text-gray-900 dark:text-white mb-2")},m(s,l){L(s,e,l),c(e,t)},p(s,l){l&1&&r!==(r=s[0].content+"")&&ne(t,r)},d(s){s&&d(e)}}}function ms(n){let e,r=n[0].content+"",t;return{c(){e=g("h3"),t=Z(r),this.h()},l(s){e=p(s,"H3",{class:!0});var l=v(e);t=Q(l,r),l.forEach(d),this.h()},h(){o(e,"class","text-lg font-semibold text-gray-900 dark:text-white mb-2")},m(s,l){L(s,e,l),c(e,t)},p(s,l){l&1&&r!==(r=s[0].content+"")&&ne(t,r)},d(s){s&&d(e)}}}function vs(n){let e,r=n[0].content+"",t;return{c(){e=g("h2"),t=Z(r),this.h()},l(s){e=p(s,"H2",{class:!0});var l=v(e);t=Q(l,r),l.forEach(d),this.h()},h(){o(e,"class","text-xl font-bold text-gray-900 dark:text-white mb-2")},m(s,l){L(s,e,l),c(e,t)},p(s,l){l&1&&r!==(r=s[0].content+"")&&ne(t,r)},d(s){s&&d(e)}}}function bs(n){let e,r=n[0].content+"",t;return{c(){e=g("h1"),t=Z(r),this.h()},l(s){e=p(s,"H1",{class:!0});var l=v(e);t=Q(l,r),l.forEach(d),this.h()},h(){o(e,"class","text-2xl font-bold text-gray-900 dark:text-white mb-2")},m(s,l){L(s,e,l),c(e,t)},p(s,l){l&1&&r!==(r=s[0].content+"")&&ne(t,r)},d(s){s&&d(e)}}}function cr(n){let e,r,t,s,l;return{c(){e=g("div"),r=g("div"),t=new lt(!1),this.h()},l(a){e=p(a,"DIV",{class:!0});var i=v(e);r=p(i,"DIV",{class:!0});var u=v(r);t=st(u,!1),u.forEach(d),i.forEach(d),this.h()},h(){t.a=null,o(r,"class","prose prose-sm max-w-none text-amber-800 dark:text-amber-200 bg-white dark:bg-gray-800 rounded p-3 border border-amber-200 dark:border-amber-700 svelte-in0eu3"),o(e,"class","px-4 pb-4")},m(a,i){L(a,e,i),c(e,r),t.m(n[3],r),l=!0},p(a,i){(!l||i&8)&&t.p(a[3])},i(a){l||(a&&It(()=>{l&&(s||(s=it(e,$t,{duration:300},!0)),s.run(1))}),l=!0)},o(a){a&&(s||(s=it(e,$t,{duration:300},!1)),s.run(0)),l=!1},d(a){a&&d(e),a&&s&&s.end()}}}function _s(n){let e;function r(l,a){return l[0].type==="thinking"?fs:l[0].type==="code"?us:l[0].type==="heading"?ds:l[0].type==="list"?cs:l[0].type==="quote"?is:l[0].type==="math"?os:as}let t=r(n),s=t(n);return{c(){s.c(),e=Ee()},l(l){s.l(l),e=Ee()},m(l,a){s.m(l,a),L(l,e,a)},p(l,[a]){t===(t=r(l))&&s?s.p(l,a):(s.d(1),s=t(l),s&&(s.c(),s.m(e.parentNode,e)))},i:ce,o:ce,d(l){l&&d(e),s.d(l)}}}function ks(n,e,r){let{block:t}=e,{isStreaming:s=!1}=e,l=!1,a="";function i(){r(2,l=!l)}function u(){navigator.clipboard.writeText(t.content)}return n.$$set=f=>{"block"in f&&r(0,t=f.block),"isStreaming"in f&&r(1,s=f.isStreaming)},n.$$.update=()=>{n.$$.dirty&1&&(t.type==="code"?r(3,a=t.content):t.type==="thinking"?r(3,a=t.content.replace(/\n/g,"<br>")):r(3,a=rt(t.content)))},[t,s,l,a,i,u]}class ys extends Ue{constructor(e){super(),qe(this,e,ks,_s,ze,{block:0,isStreaming:1})}}function dr(n,e,r){const t=n.slice();return t[11]=e[r],t[13]=r,t}function ws(n){let e,r;return{c(){e=ue("svg"),r=ue("path"),this.h()},l(t){e=de(t,"svg",{class:!0,fill:!0,stroke:!0,viewBox:!0});var s=v(e);r=de(s,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),v(r).forEach(d),s.forEach(d),this.h()},h(){o(r,"stroke-linecap","round"),o(r,"stroke-linejoin","round"),o(r,"stroke-width","2"),o(r,"d","M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"),o(e,"class","w-4 h-4 text-white"),o(e,"fill","none"),o(e,"stroke","currentColor"),o(e,"viewBox","0 0 24 24")},m(t,s){L(t,e,s),c(e,r)},d(t){t&&d(e)}}}function xs(n){let e,r;return{c(){e=ue("svg"),r=ue("path"),this.h()},l(t){e=de(t,"svg",{class:!0,fill:!0,stroke:!0,viewBox:!0});var s=v(e);r=de(s,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),v(r).forEach(d),s.forEach(d),this.h()},h(){o(r,"stroke-linecap","round"),o(r,"stroke-linejoin","round"),o(r,"stroke-width","2"),o(r,"d","M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"),o(e,"class","w-4 h-4 text-white"),o(e,"fill","none"),o(e,"stroke","currentColor"),o(e,"viewBox","0 0 24 24")},m(t,s){L(t,e,s),c(e,r)},d(t){t&&d(e)}}}function ur(n){let e,r,t,s=n[2].blocks.some(br),l=n[2].hasThinking&&fr(),a=n[2].hasCode&&hr(),i=s&&pr();return{c(){e=g("div"),l&&l.c(),r=S(),a&&a.c(),t=S(),i&&i.c(),this.h()},l(u){e=p(u,"DIV",{class:!0});var f=v(e);l&&l.l(f),r=D(f),a&&a.l(f),t=D(f),i&&i.l(f),f.forEach(d),this.h()},h(){o(e,"class","flex items-center space-x-1")},m(u,f){L(u,e,f),l&&l.m(e,null),c(e,r),a&&a.m(e,null),c(e,t),i&&i.m(e,null)},p(u,f){u[2].hasThinking?l||(l=fr(),l.c(),l.m(e,r)):l&&(l.d(1),l=null),u[2].hasCode?a||(a=hr(),a.c(),a.m(e,t)):a&&(a.d(1),a=null),f&4&&(s=u[2].blocks.some(br)),s?i||(i=pr(),i.c(),i.m(e,null)):i&&(i.d(1),i=null)},d(u){u&&d(e),l&&l.d(),a&&a.d(),i&&i.d()}}}function fr(n){let e,r=`<svg class="w-3 h-3 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364-.636l-.707.707M21 12h-1M17.657 18.364l-.707-.707M12 21v-1m-6.364.636l.707-.707M3 12h1M6.343 5.636l.707.707"></path></svg>
									思考`;return{c(){e=g("span"),e.innerHTML=r,this.h()},l(t){e=p(t,"SPAN",{class:!0,"data-svelte-h":!0}),F(e)!=="svelte-tg3tpk"&&(e.innerHTML=r),this.h()},h(){o(e,"class","inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-amber-100 text-amber-800 dark:bg-amber-900/20 dark:text-amber-300")},m(t,s){L(t,e,s)},d(t){t&&d(e)}}}function hr(n){let e,r=`<svg class="w-3 h-3 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"></path></svg>
									代码`;return{c(){e=g("span"),e.innerHTML=r,this.h()},l(t){e=p(t,"SPAN",{class:!0,"data-svelte-h":!0}),F(e)!=="svelte-9cdpt4"&&(e.innerHTML=r),this.h()},h(){o(e,"class","inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-300")},m(t,s){L(t,e,s)},d(t){t&&d(e)}}}function pr(n){let e,r=`<svg class="w-3 h-3 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 10h16M4 14h16M4 18h16"></path></svg>
									列表`;return{c(){e=g("span"),e.innerHTML=r,this.h()},l(t){e=p(t,"SPAN",{class:!0,"data-svelte-h":!0}),F(e)!=="svelte-18t4l3p"&&(e.innerHTML=r),this.h()},h(){o(e,"class","inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-300")},m(t,s){L(t,e,s)},d(t){t&&d(e)}}}function Cs(n){let e,r,t;return{c(){e=g("div"),r=g("div"),t=new lt(!1),this.h()},l(s){e=p(s,"DIV",{class:!0});var l=v(e);r=p(l,"DIV",{class:!0});var a=v(r);t=st(a,!1),a.forEach(d),l.forEach(d),this.h()},h(){t.a=null,o(r,"class","prose prose-gray dark:prose-invert max-w-none prose-sm"),o(e,"class","bg-gray-100 dark:bg-gray-700 text-gray-900 dark:text-white border border-gray-200 dark:border-gray-600 rounded-2xl px-4 py-3 shadow-sm")},m(s,l){L(s,e,l),c(e,r),t.m(n[6],r)},p(s,l){l&64&&t.p(s[6])},i:ce,o:ce,d(s){s&&d(e)}}}function Es(n){let e,r,t,s,l;const a=[Is,Ts],i=[];function u(f,h){return f[2].blocks.length>0?0:1}return r=u(n),t=i[r]=a[r](n),{c(){e=g("div"),t.c(),this.h()},l(f){e=p(f,"DIV",{class:!0});var h=v(e);t.l(h),h.forEach(d),this.h()},h(){o(e,"class",s="bg-gray-100 dark:bg-gray-700 text-gray-900 dark:text-white border border-gray-200 dark:border-gray-600 rounded-2xl px-4 py-3 "+(n[1]?"message-enter":"")+" shadow-sm")},m(f,h){L(f,e,h),i[r].m(e,null),l=!0},p(f,h){let m=r;r=u(f),r===m?i[r].p(f,h):($e(),le(i[m],1,1,()=>{i[m]=null}),et(),t=i[r],t?t.p(f,h):(t=i[r]=a[r](f),t.c()),ee(t,1),t.m(e,null)),(!l||h&2&&s!==(s="bg-gray-100 dark:bg-gray-700 text-gray-900 dark:text-white border border-gray-200 dark:border-gray-600 rounded-2xl px-4 py-3 "+(f[1]?"message-enter":"")+" shadow-sm"))&&o(e,"class",s)},i(f){l||(ee(t),l=!0)},o(f){le(t),l=!1},d(f){f&&d(e),i[r].d()}}}function Ms(n){let e,r,t=n[0].content+"",s;return{c(){e=g("div"),r=g("div"),s=Z(t),this.h()},l(l){e=p(l,"DIV",{class:!0});var a=v(e);r=p(a,"DIV",{class:!0});var i=v(r);s=Q(i,t),i.forEach(d),a.forEach(d),this.h()},h(){o(r,"class","whitespace-pre-wrap break-words"),o(e,"class","bg-blue-600 text-white rounded-2xl px-4 py-3 shadow-sm")},m(l,a){L(l,e,a),c(e,r),c(r,s)},p(l,a){a&1&&t!==(t=l[0].content+"")&&ne(s,t)},i:ce,o:ce,d(l){l&&d(e)}}}function Ts(n){let e,r,t,s=n[1]&&gr();return{c(){e=g("div"),r=new lt(!1),t=S(),s&&s.c(),this.h()},l(l){e=p(l,"DIV",{class:!0});var a=v(e);r=st(a,!1),t=D(a),s&&s.l(a),a.forEach(d),this.h()},h(){r.a=t,o(e,"class","prose prose-gray dark:prose-invert max-w-none prose-sm")},m(l,a){L(l,e,a),r.m(n[6],e),c(e,t),s&&s.m(e,null)},p(l,a){a&64&&r.p(l[6]),l[1]?s||(s=gr(),s.c(),s.m(e,null)):s&&(s.d(1),s=null)},i:ce,o:ce,d(l){l&&d(e),s&&s.d()}}}function Is(n){let e,r,t=tt(n[2].blocks),s=[];for(let a=0;a<t.length;a+=1)s[a]=mr(dr(n,t,a));const l=a=>le(s[a],1,1,()=>{s[a]=null});return{c(){for(let a=0;a<s.length;a+=1)s[a].c();e=Ee()},l(a){for(let i=0;i<s.length;i+=1)s[i].l(a);e=Ee()},m(a,i){for(let u=0;u<s.length;u+=1)s[u]&&s[u].m(a,i);L(a,e,i),r=!0},p(a,i){if(i&6){t=tt(a[2].blocks);let u;for(u=0;u<t.length;u+=1){const f=dr(a,t,u);s[u]?(s[u].p(f,i),ee(s[u],1)):(s[u]=mr(f),s[u].c(),ee(s[u],1),s[u].m(e.parentNode,e))}for($e(),u=t.length;u<s.length;u+=1)l(u);et()}},i(a){if(!r){for(let i=0;i<t.length;i+=1)ee(s[i]);r=!0}},o(a){s=s.filter(Boolean);for(let i=0;i<s.length;i+=1)le(s[i]);r=!1},d(a){a&&d(e),Vr(s,a)}}}function gr(n){let e;return{c(){e=g("span"),this.h()},l(r){e=p(r,"SPAN",{class:!0}),v(e).forEach(d),this.h()},h(){o(e,"class","inline-block w-2 h-5 bg-gray-400 dark:bg-gray-300 animate-pulse ml-1 rounded-full")},m(r,t){L(r,e,t)},d(r){r&&d(e)}}}function mr(n){let e,r;return e=new ys({props:{block:n[11],isStreaming:n[1]&&n[13]===n[2].blocks.length-1}}),{c(){Oe(e.$$.fragment)},l(t){Pe(e.$$.fragment,t)},m(t,s){He(e,t,s),r=!0},p(t,s){const l={};s&4&&(l.block=t[11]),s&6&&(l.isStreaming=t[1]&&t[13]===t[2].blocks.length-1),e.$set(l)},i(t){r||(ee(e.$$.fragment,t),r=!0)},o(t){le(e.$$.fragment,t),r=!1},d(t){je(e,t)}}}function vr(n){let e,r,t,s='<svg class="w-4 h-4 text-gray-500 dark:text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>',l,a,i;return{c(){e=g("div"),r=g("div"),t=g("button"),t.innerHTML=s,this.h()},l(u){e=p(u,"DIV",{class:!0});var f=v(e);r=p(f,"DIV",{class:!0});var h=v(r);t=p(h,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),F(t)!=="svelte-udclmt"&&(t.innerHTML=s),h.forEach(d),f.forEach(d),this.h()},h(){o(t,"class","p-1.5 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors"),o(t,"title","Copy message"),o(r,"class","flex space-x-1 bg-white dark:bg-gray-800 rounded-lg p-1 shadow-lg border border-gray-200 dark:border-gray-600"),o(e,"class",l="absolute "+(n[5]?"left-0":"right-0")+" top-0 -mt-2 "+(n[5]?"-ml-12":"-mr-12")+" opacity-0 group-hover:opacity-100 transition-opacity")},m(u,f){L(u,e,f),c(e,r),c(r,t),a||(i=X(t,"click",n[7]),a=!0)},p(u,f){f&32&&l!==(l="absolute "+(u[5]?"left-0":"right-0")+" top-0 -mt-2 "+(u[5]?"-ml-12":"-mr-12")+" opacity-0 group-hover:opacity-100 transition-opacity")&&o(e,"class",l)},d(u){u&&d(e),a=!1,i()}}}function Ds(n){let e,r,t,s,l,a,i,u,f,h=n[5]?"You":"Assistant",m,x,b,_,k=er(n[0].timestamp)+"",y,w,C,A,N,E,V,B,j,z,H,M,O;function R(T,P){return T[5]?xs:ws}let J=R(n),K=J(n),q=n[3]&&n[2]&&ur(n);const G=[Ms,Es,Cs],Y=[];function oe(T,P){return T[5]?0:T[3]&&T[2]?1:2}N=oe(n),E=Y[N]=G[N](n);let I=n[4]&&!n[1]&&vr(n);return{c(){e=g("div"),r=g("div"),t=g("div"),s=g("div"),K.c(),a=S(),i=g("div"),u=g("div"),f=g("span"),m=Z(h),x=S(),q&&q.c(),b=S(),_=g("span"),y=Z(k),C=S(),A=g("div"),E.c(),V=S(),I&&I.c(),this.h()},l(T){e=p(T,"DIV",{class:!0});var P=v(e);r=p(P,"DIV",{class:!0});var $=v(r);t=p($,"DIV",{class:!0});var re=v(t);s=p(re,"DIV",{class:!0});var fe=v(s);K.l(fe),fe.forEach(d),a=D(re),i=p(re,"DIV",{class:!0});var ae=v(i);u=p(ae,"DIV",{class:!0});var W=v(u);f=p(W,"SPAN",{class:!0});var te=v(f);m=Q(te,h),te.forEach(d),x=D(W),q&&q.l(W),b=D(W),_=p(W,"SPAN",{class:!0});var ye=v(_);y=Q(ye,k),ye.forEach(d),W.forEach(d),C=D(ae),A=p(ae,"DIV",{class:!0});var Me=v(A);E.l(Me),V=D(Me),I&&I.l(Me),Me.forEach(d),ae.forEach(d),re.forEach(d),$.forEach(d),P.forEach(d),this.h()},h(){o(s,"class",l="w-8 h-8 "+(n[5]?"bg-green-500":"bg-blue-600")+" rounded-full flex items-center justify-center flex-shrink-0 shadow-sm"),o(f,"class","text-sm font-medium text-gray-700 dark:text-gray-300"),o(_,"class","text-xs text-gray-500 dark:text-gray-400"),o(u,"class",w="flex items-center space-x-2 mb-2 "+(n[5]?"justify-end":"")),o(A,"class","relative group"),o(i,"class","flex-1 min-w-0"),o(t,"class",B="flex items-start space-x-3 "+(n[5]?"flex-row-reverse space-x-reverse":"")),o(r,"class",j="max-w-3xl "+(n[5]?"order-2":"")),o(e,"class",z="flex "+(n[5]?"justify-end":"justify-start"))},m(T,P){L(T,e,P),c(e,r),c(r,t),c(t,s),K.m(s,null),c(t,a),c(t,i),c(i,u),c(u,f),c(f,m),c(u,x),q&&q.m(u,null),c(u,b),c(u,_),c(_,y),c(i,C),c(i,A),Y[N].m(A,null),c(A,V),I&&I.m(A,null),H=!0,M||(O=[X(e,"mouseenter",n[8]),X(e,"mouseleave",n[9])],M=!0)},p(T,[P]){J!==(J=R(T))&&(K.d(1),K=J(T),K&&(K.c(),K.m(s,null))),(!H||P&32&&l!==(l="w-8 h-8 "+(T[5]?"bg-green-500":"bg-blue-600")+" rounded-full flex items-center justify-center flex-shrink-0 shadow-sm"))&&o(s,"class",l),(!H||P&32)&&h!==(h=T[5]?"You":"Assistant")&&ne(m,h),T[3]&&T[2]?q?q.p(T,P):(q=ur(T),q.c(),q.m(u,b)):q&&(q.d(1),q=null),(!H||P&1)&&k!==(k=er(T[0].timestamp)+"")&&ne(y,k),(!H||P&32&&w!==(w="flex items-center space-x-2 mb-2 "+(T[5]?"justify-end":"")))&&o(u,"class",w);let $=N;N=oe(T),N===$?Y[N].p(T,P):($e(),le(Y[$],1,1,()=>{Y[$]=null}),et(),E=Y[N],E?E.p(T,P):(E=Y[N]=G[N](T),E.c()),ee(E,1),E.m(A,V)),T[4]&&!T[1]?I?I.p(T,P):(I=vr(T),I.c(),I.m(A,null)):I&&(I.d(1),I=null),(!H||P&32&&B!==(B="flex items-start space-x-3 "+(T[5]?"flex-row-reverse space-x-reverse":"")))&&o(t,"class",B),(!H||P&32&&j!==(j="max-w-3xl "+(T[5]?"order-2":"")))&&o(r,"class",j),(!H||P&32&&z!==(z="flex "+(T[5]?"justify-end":"justify-start")))&&o(e,"class",z)},i(T){H||(ee(E),H=!0)},o(T){le(E),H=!1},d(T){T&&d(e),K.d(),q&&q.d(),Y[N].d(),I&&I.d(),M=!1,ct(O)}}}const br=n=>n.type==="list";function Ss(n,e,r){let t,s,l,a,{message:i}=e,{isStreaming:u=!1}=e,f=!1;async function h(){try{await zr(i.content),Ce.success("Message copied to clipboard")}catch{Ce.error("Failed to copy message")}}const m=()=>r(4,f=!0),x=()=>r(4,f=!1);return n.$$set=b=>{"message"in b&&r(0,i=b.message),"isStreaming"in b&&r(1,u=b.isStreaming)},n.$$.update=()=>{n.$$.dirty&1&&r(6,t=rt(i.content)),n.$$.dirty&1&&r(5,s=i.role==="user"),n.$$.dirty&1&&r(3,l=i.role==="assistant"),n.$$.dirty&9&&r(2,a=l?es(i.content):null),n.$$.dirty&4&&a&&ns(a)},[i,u,a,l,f,s,t,h,m,x]}class Ar extends Ue{constructor(e){super(),qe(this,e,Ss,Ds,ze,{message:0,isStreaming:1})}}function Vs(n){let e,r='<div class="typing-dot"></div> <div class="typing-dot"></div> <div class="typing-dot"></div>';return{c(){e=g("div"),e.innerHTML=r,this.h()},l(t){e=p(t,"DIV",{class:!0,"data-svelte-h":!0}),F(e)!=="svelte-1ga31bi"&&(e.innerHTML=r),this.h()},h(){o(e,"class","typing-indicator")},m(t,s){L(t,e,s)},p:ce,i:ce,o:ce,d(t){t&&d(e)}}}class Ls extends Ue{constructor(e){super(),qe(this,e,null,Vs,ze,{})}}function _r(n,e,r){const t=n.slice();return t[13]=e[r],t}function As(n){let e=[],r=new Map,t,s,l,a,i,u=tt(n[4]);const f=b=>b[13].id;for(let b=0;b<u.length;b+=1){let _=_r(n,u,b),k=f(_);r.set(k,e[b]=kr(k,_))}const h=[js,Ns],m=[];function x(b,_){return b[2]?0:b[5]?1:-1}return~(s=x(n))&&(l=m[s]=h[s](n)),{c(){for(let b=0;b<e.length;b+=1)e[b].c();t=S(),l&&l.c(),a=Ee()},l(b){for(let _=0;_<e.length;_+=1)e[_].l(b);t=D(b),l&&l.l(b),a=Ee()},m(b,_){for(let k=0;k<e.length;k+=1)e[k]&&e[k].m(b,_);L(b,t,_),~s&&m[s].m(b,_),L(b,a,_),i=!0},p(b,_){_&16&&(u=tt(b[4]),$e(),e=Lr(e,_,f,1,b,u,r,t.parentNode,qr,kr,t,_r),et());let k=s;s=x(b),s===k?~s&&m[s].p(b,_):(l&&($e(),le(m[k],1,1,()=>{m[k]=null}),et()),~s?(l=m[s],l?l.p(b,_):(l=m[s]=h[s](b),l.c()),ee(l,1),l.m(a.parentNode,a)):l=null)},i(b){if(!i){for(let _=0;_<u.length;_+=1)ee(e[_]);ee(l),i=!0}},o(b){for(let _=0;_<e.length;_+=1)le(e[_]);le(l),i=!1},d(b){b&&(d(t),d(a));for(let _=0;_<e.length;_+=1)e[_].d(b);~s&&m[s].d(b)}}}function Bs(n){let e,r='<div class="w-20 h-20 mx-auto mb-6 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center"><svg class="w-10 h-10 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"></path></svg></div> <h2 class="text-xl font-semibold mb-2 text-gray-700 dark:text-gray-300">Start a conversation</h2> <p class="text-gray-500 dark:text-gray-400">Send a message to begin chatting with the AI assistant.</p>';return{c(){e=g("div"),e.innerHTML=r,this.h()},l(t){e=p(t,"DIV",{class:!0,"data-svelte-h":!0}),F(e)!=="svelte-1fktq3p"&&(e.innerHTML=r),this.h()},h(){o(e,"class","text-center text-gray-500 dark:text-gray-400 mt-20")},m(t,s){L(t,e,s)},p:ce,i:ce,o:ce,d(t){t&&d(e)}}}function kr(n,e){let r,t,s;return t=new Ar({props:{message:e[13]}}),{key:n,first:null,c(){r=Ee(),Oe(t.$$.fragment),this.h()},l(l){r=Ee(),Pe(t.$$.fragment,l),this.h()},h(){this.first=r},m(l,a){L(l,r,a),He(t,l,a),s=!0},p(l,a){e=l;const i={};a&16&&(i.message=e[13]),t.$set(i)},i(l){s||(ee(t.$$.fragment,l),s=!0)},o(l){le(t.$$.fragment,l),s=!1},d(l){l&&d(r),je(t,l)}}}function Ns(n){let e,r,t,s,l='<svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path></svg>',a,i,u,f;return u=new Ls({}),{c(){e=g("div"),r=g("div"),t=g("div"),s=g("div"),s.innerHTML=l,a=S(),i=g("div"),Oe(u.$$.fragment),this.h()},l(h){e=p(h,"DIV",{class:!0});var m=v(e);r=p(m,"DIV",{class:!0});var x=v(r);t=p(x,"DIV",{class:!0});var b=v(t);s=p(b,"DIV",{class:!0,"data-svelte-h":!0}),F(s)!=="svelte-189sxyb"&&(s.innerHTML=l),a=D(b),i=p(b,"DIV",{class:!0});var _=v(i);Pe(u.$$.fragment,_),_.forEach(d),b.forEach(d),x.forEach(d),m.forEach(d),this.h()},h(){o(s,"class","w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center flex-shrink-0 shadow-sm"),o(i,"class","bg-gray-100 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-2xl px-4 py-3 shadow-sm"),o(t,"class","flex items-start space-x-3"),o(r,"class","max-w-3xl"),o(e,"class","flex justify-start")},m(h,m){L(h,e,m),c(e,r),c(r,t),c(t,s),c(t,a),c(t,i),He(u,i,null),f=!0},p:ce,i(h){f||(ee(u.$$.fragment,h),f=!0)},o(h){le(u.$$.fragment,h),f=!1},d(h){h&&d(e),je(u)}}}function js(n){let e,r;return e=new Ar({props:{message:{id:n[3],chat_id:n[0]||"",role:"assistant",content:n[2],timestamp:Math.floor(Date.now()/1e3)},isStreaming:!0}}),{c(){Oe(e.$$.fragment)},l(t){Pe(e.$$.fragment,t)},m(t,s){He(e,t,s),r=!0},p(t,s){const l={};s&13&&(l.message={id:t[3],chat_id:t[0]||"",role:"assistant",content:t[2],timestamp:Math.floor(Date.now()/1e3)}),e.$set(l)},i(t){r||(ee(e.$$.fragment,t),r=!0)},o(t){le(e.$$.fragment,t),r=!1},d(t){je(e,t)}}}function Hs(n){let e,r,t,s,l,a,i;const u=[Bs,As],f=[];function h(m,x){return m[4].length===0&&!m[2]?0:1}return t=h(n),s=f[t]=u[t](n),{c(){e=g("div"),r=g("div"),s.c(),this.h()},l(m){e=p(m,"DIV",{class:!0});var x=v(e);r=p(x,"DIV",{class:!0});var b=v(r);s.l(b),b.forEach(d),x.forEach(d),this.h()},h(){o(r,"class","max-w-4xl mx-auto space-y-6"),o(e,"class","flex-1 overflow-y-auto p-4 space-y-6 bg-gray-50 dark:bg-gray-900")},m(m,x){L(m,e,x),c(e,r),f[t].m(r,null),n[10](e),l=!0,a||(i=X(e,"scroll",n[6]),a=!0)},p(m,[x]){let b=t;t=h(m),t===b?f[t].p(m,x):($e(),le(f[b],1,1,()=>{f[b]=null}),et(),s=f[t],s?s.p(m,x):(s=f[t]=u[t](m),s.c()),ee(s,1),s.m(r,null))},i(m){l||(ee(s),l=!0)},o(m){le(s),l=!1},d(m){m&&d(e),f[t].d(),n[10](null),a=!1,i()}}}function Ps(n,e,r){let t,s;ge(n,ut,y=>r(4,t=y)),ge(n,ft,y=>r(5,s=y));let{chatId:l=null}=e,a,i=!0,u="",f="";function h(){a&&(i=Rr(a))}function m(){a&&i&&Fr(a)}function x(y,w){w&&w!==f&&(r(2,u=""),r(3,f=w)),r(2,u+=y),m()}function b(y){if(y!==void 0&&r(2,u=y),u&&l){const w={id:f||Date.now().toString(),chat_id:l,role:"assistant",content:u,timestamp:Math.floor(Date.now()/1e3)};ut.update(C=>[...C,w])}r(2,u=""),r(3,f=""),m()}function _(){r(2,u=""),r(3,f="")}jr(()=>{m()}),St(()=>{if(a)return a.addEventListener("scroll",h),()=>{a.removeEventListener("scroll",h)}});function k(y){ht[y?"unshift":"push"](()=>{a=y,r(1,a)})}return n.$$set=y=>{"chatId"in y&&r(0,l=y.chatId)},[l,a,u,f,t,s,h,x,b,_,k]}class Os extends Ue{constructor(e){super(),qe(this,e,Ps,Hs,ze,{chatId:0,addStreamingContent:7,finishStreaming:8,clearStreaming:9})}get addStreamingContent(){return this.$$.ctx[7]}get finishStreaming(){return this.$$.ctx[8]}get clearStreaming(){return this.$$.ctx[9]}}function Us(n){let e,r,t,s;function l(u,f){return u[5]?Rs:zs}let a=l(n),i=a(n);return{c(){e=g("button"),i.c(),this.h()},l(u){e=p(u,"BUTTON",{class:!0});var f=v(e);i.l(f),f.forEach(d),this.h()},h(){e.disabled=r=!n[3].trim()||n[5]||n[1],o(e,"class","px-4 py-3 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-300 dark:disabled:bg-gray-600 disabled:cursor-not-allowed text-white rounded-xl transition-colors flex items-center space-x-2 font-medium shadow-sm")},m(u,f){L(u,e,f),i.m(e,null),t||(s=X(e,"click",n[8]),t=!0)},p(u,f){a!==(a=l(u))&&(i.d(1),i=a(u),i&&(i.c(),i.m(e,null))),f&42&&r!==(r=!u[3].trim()||u[5]||u[1])&&(e.disabled=r)},d(u){u&&d(e),i.d(),t=!1,s()}}}function qs(n){let e,r='<svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24"><rect x="6" y="6" width="12" height="12" rx="2"></rect></svg> <span>Stop</span>',t,s;return{c(){e=g("button"),e.innerHTML=r,this.h()},l(l){e=p(l,"BUTTON",{class:!0,"data-svelte-h":!0}),F(e)!=="svelte-1dy7w5k"&&(e.innerHTML=r),this.h()},h(){o(e,"class","px-4 py-3 bg-red-600 hover:bg-red-700 text-white rounded-xl transition-colors flex items-center space-x-2 font-medium shadow-sm")},m(l,a){L(l,e,a),t||(s=X(e,"click",n[10]),t=!0)},p:ce,d(l){l&&d(e),t=!1,s()}}}function zs(n){let e,r,t,s,l="Send";return{c(){e=ue("svg"),r=ue("path"),t=S(),s=g("span"),s.textContent=l,this.h()},l(a){e=de(a,"svg",{class:!0,fill:!0,stroke:!0,viewBox:!0});var i=v(e);r=de(i,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),v(r).forEach(d),i.forEach(d),t=D(a),s=p(a,"SPAN",{"data-svelte-h":!0}),F(s)!=="svelte-14i38x8"&&(s.textContent=l),this.h()},h(){o(r,"stroke-linecap","round"),o(r,"stroke-linejoin","round"),o(r,"stroke-width","2"),o(r,"d","M12 19l9 2-9-18-9 18 9-2zm0 0v-8"),o(e,"class","w-4 h-4"),o(e,"fill","none"),o(e,"stroke","currentColor"),o(e,"viewBox","0 0 24 24")},m(a,i){L(a,e,i),c(e,r),L(a,t,i),L(a,s,i)},d(a){a&&(d(e),d(t),d(s))}}}function Rs(n){let e,r,t,s="Sending...";return{c(){e=g("div"),r=S(),t=g("span"),t.textContent=s,this.h()},l(l){e=p(l,"DIV",{class:!0}),v(e).forEach(d),r=D(l),t=p(l,"SPAN",{"data-svelte-h":!0}),F(t)!=="svelte-1oib7d2"&&(t.textContent=s),this.h()},h(){o(e,"class","w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin")},m(l,a){L(l,e,a),L(l,r,a),L(l,t,a)},d(l){l&&(d(e),d(r),d(t))}}}function Fs(n){let e,r="Press Enter to send, Shift+Enter for new line";return{c(){e=g("div"),e.textContent=r,this.h()},l(t){e=p(t,"DIV",{class:!0,"data-svelte-h":!0}),F(e)!=="svelte-1cidstp"&&(e.textContent=r),this.h()},h(){o(e,"class","mt-2 text-xs text-gray-500 dark:text-gray-400 text-center")},m(t,s){L(t,e,s)},d(t){t&&d(e)}}}function Js(n){let e,r='<div class="flex items-center space-x-2"><svg class="w-4 h-4 text-red-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <span class="text-sm text-red-700 dark:text-red-300 font-medium">No model connected</span></div> <p class="text-xs text-red-600 dark:text-red-400 mt-1">Please configure a VLLM model to start chatting. Click the model button in the header to set up your connection.</p>';return{c(){e=g("div"),e.innerHTML=r,this.h()},l(t){e=p(t,"DIV",{class:!0,"data-svelte-h":!0}),F(e)!=="svelte-dl40tv"&&(e.innerHTML=r),this.h()},h(){o(e,"class","mt-2 p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg")},m(t,s){L(t,e,s)},d(t){t&&d(e)}}}function Ks(n){let e,r,t,s,l,a,i,u,f;function h(y,w){return y[4]?qs:Us}let m=h(n),x=m(n);function b(y,w){return y[6].connected?Fs:Js}let _=b(n),k=_(n);return{c(){e=g("div"),r=g("div"),t=g("div"),s=g("div"),l=g("textarea"),a=S(),x.c(),i=S(),k.c(),this.h()},l(y){e=p(y,"DIV",{class:!0});var w=v(e);r=p(w,"DIV",{class:!0});var C=v(r);t=p(C,"DIV",{class:!0});var A=v(t);s=p(A,"DIV",{class:!0});var N=v(s);l=p(N,"TEXTAREA",{placeholder:!0,rows:!0,class:!0,style:!0}),v(l).forEach(d),N.forEach(d),a=D(A),x.l(A),A.forEach(d),i=D(C),k.l(C),C.forEach(d),w.forEach(d),this.h()},h(){o(l,"placeholder",n[0]),l.disabled=n[1],o(l,"rows","1"),o(l,"class","w-full px-4 py-3 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-xl text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 resize-none focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:opacity-50 disabled:cursor-not-allowed transition-colors"),Gt(l,"min-height","48px"),Gt(l,"max-height","200px"),o(s,"class","flex-1 relative"),o(t,"class","flex items-end space-x-3"),o(r,"class","max-w-4xl mx-auto"),o(e,"class","border-t border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 p-4")},m(y,w){L(y,e,w),c(e,r),c(r,t),c(t,s),c(s,l),n[11](l),be(l,n[3]),c(t,a),x.m(t,null),c(r,i),k.m(r,null),u||(f=[X(l,"input",n[12]),X(l,"keydown",n[7]),X(l,"input",n[9])],u=!0)},p(y,[w]){w&1&&o(l,"placeholder",y[0]),w&2&&(l.disabled=y[1]),w&8&&be(l,y[3]),m===(m=h(y))&&x?x.p(y,w):(x.d(1),x=m(y),x&&(x.c(),x.m(t,null))),_!==(_=b(y))&&(k.d(1),k=_(y),k&&(k.c(),k.m(r,null)))},i:ce,o:ce,d(y){y&&d(e),n[11](null),x.d(),k.d(),u=!1,ct(f)}}}function Gs(n,e,r){let t,s,l;ge(n,ft,w=>r(4,t=w)),ge(n,dt,w=>r(5,s=w)),ge(n,Ze,w=>r(6,l=w));const a=Ir();let{placeholder:i="Type your message..."}=e,{disabled:u=!1}=e,f="",h;function m(w){w.key==="Enter"&&!w.shiftKey&&(w.preventDefault(),x())}function x(){if(!l.connected){a("openModelSettings");return}f.trim()&&!s&&!t&&(a("send",{content:f.trim()}),r(3,f=""),b())}function b(){h&&(r(2,h.style.height="auto",h),r(2,h.style.height=Math.min(h.scrollHeight,200)+"px",h))}function _(){a("stop")}function k(w){ht[w?"unshift":"push"](()=>{h=w,r(2,h)})}function y(){f=this.value,r(3,f)}return n.$$set=w=>{"placeholder"in w&&r(0,i=w.placeholder),"disabled"in w&&r(1,u=w.disabled)},n.$$.update=()=>{n.$$.dirty&4&&h&&b()},[i,u,h,f,t,s,l,m,x,b,_,k,y]}class Ws extends Ue{constructor(e){super(),qe(this,e,Gs,Ks,ze,{placeholder:0,disabled:1})}}function yr(n,e,r){const t=n.slice();return t[16]=e[r],t}function wr(n){let e,r,t,s,l="Model Configuration",a,i,u='<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>',f,h,m,x,b="Connection Status",_,k,y,w,C,A,N=n[5].connected?"Connected":"Disconnected",E,V,B,j,z="VLLM API URL",H,M,O,R,J="Enter the VLLM API endpoint URL (e.g., http://localhost:8000/v1)",K,q,G,Y="API Key (Optional)",oe,I,T,P,$,re,fe,ae,W="Reset",te,ye,Me,Te,Ie,U,se,De=n[4].temperature+"",ke,Be,ie,Ge,we,Se,Fe="Max Tokens",nt,_e,at,Ve,Le,Ot="System Prompt",Vt,Ae,Lt,We,Xe,Ut="Cancel",At,Ye,qt="Save Settings",Bt,zt;function Rt(Ke,pe){return Ke[3]?Ys:Xs}let pt=Rt(n),Je=pt(n),me=n[5].error&&xr(n),ve=n[5].connected&&n[2].length>0&&Cr(n);return{c(){e=g("div"),r=g("div"),t=g("div"),s=g("h2"),s.textContent=l,a=S(),i=g("button"),i.innerHTML=u,f=S(),h=g("div"),m=g("div"),x=g("h3"),x.textContent=b,_=S(),k=g("div"),y=g("div"),C=S(),A=g("span"),E=Z(N),V=S(),B=g("div"),j=g("label"),j.textContent=z,H=S(),M=g("input"),O=S(),R=g("p"),R.textContent=J,K=S(),q=g("div"),G=g("label"),G.textContent=Y,oe=S(),I=g("input"),T=S(),P=g("div"),$=g("button"),Je.c(),fe=S(),ae=g("button"),ae.textContent=W,te=S(),me&&me.c(),ye=S(),ve&&ve.c(),Me=S(),Te=g("div"),Ie=g("div"),U=g("label"),se=Z("Temperature: "),ke=Z(De),Be=S(),ie=g("input"),Ge=S(),we=g("div"),Se=g("label"),Se.textContent=Fe,nt=S(),_e=g("input"),at=S(),Ve=g("div"),Le=g("label"),Le.textContent=Ot,Vt=S(),Ae=g("textarea"),Lt=S(),We=g("div"),Xe=g("button"),Xe.textContent=Ut,At=S(),Ye=g("button"),Ye.textContent=qt,this.h()},l(Ke){e=p(Ke,"DIV",{class:!0});var pe=v(e);r=p(pe,"DIV",{class:!0});var gt=v(r);t=p(gt,"DIV",{class:!0});var mt=v(t);s=p(mt,"H2",{class:!0,"data-svelte-h":!0}),F(s)!=="svelte-14f711m"&&(s.textContent=l),a=D(mt),i=p(mt,"BUTTON",{class:!0,"data-svelte-h":!0}),F(i)!=="svelte-13m9s7r"&&(i.innerHTML=u),mt.forEach(d),f=D(gt),h=p(gt,"DIV",{class:!0});var he=v(h);m=p(he,"DIV",{class:!0});var vt=v(m);x=p(vt,"H3",{class:!0,"data-svelte-h":!0}),F(x)!=="svelte-1lcpkaq"&&(x.textContent=b),_=D(vt),k=p(vt,"DIV",{class:!0});var bt=v(k);y=p(bt,"DIV",{class:!0}),v(y).forEach(d),C=D(bt),A=p(bt,"SPAN",{class:!0});var Ft=v(A);E=Q(Ft,N),Ft.forEach(d),bt.forEach(d),vt.forEach(d),V=D(he),B=p(he,"DIV",{class:!0});var ot=v(B);j=p(ot,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),F(j)!=="svelte-3xht4u"&&(j.textContent=z),H=D(ot),M=p(ot,"INPUT",{id:!0,type:!0,placeholder:!0,class:!0}),O=D(ot),R=p(ot,"P",{class:!0,"data-svelte-h":!0}),F(R)!=="svelte-1l04ufe"&&(R.textContent=J),ot.forEach(d),K=D(he),q=p(he,"DIV",{class:!0});var _t=v(q);G=p(_t,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),F(G)!=="svelte-qdv98d"&&(G.textContent=Y),oe=D(_t),I=p(_t,"INPUT",{id:!0,type:!0,placeholder:!0,class:!0}),_t.forEach(d),T=D(he),P=p(he,"DIV",{class:!0});var kt=v(P);$=p(kt,"BUTTON",{class:!0});var Jt=v($);Je.l(Jt),Jt.forEach(d),fe=D(kt),ae=p(kt,"BUTTON",{class:!0,"data-svelte-h":!0}),F(ae)!=="svelte-c6dky0"&&(ae.textContent=W),kt.forEach(d),te=D(he),me&&me.l(he),ye=D(he),ve&&ve.l(he),Me=D(he),Te=p(he,"DIV",{class:!0});var yt=v(Te);Ie=p(yt,"DIV",{class:!0});var wt=v(Ie);U=p(wt,"LABEL",{for:!0,class:!0});var Nt=v(U);se=Q(Nt,"Temperature: "),ke=Q(Nt,De),Nt.forEach(d),Be=D(wt),ie=p(wt,"INPUT",{id:!0,type:!0,min:!0,max:!0,step:!0,class:!0}),wt.forEach(d),Ge=D(yt),we=p(yt,"DIV",{class:!0});var xt=v(we);Se=p(xt,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),F(Se)!=="svelte-19kjneg"&&(Se.textContent=Fe),nt=D(xt),_e=p(xt,"INPUT",{id:!0,type:!0,min:!0,max:!0,class:!0}),xt.forEach(d),yt.forEach(d),at=D(he),Ve=p(he,"DIV",{class:!0});var Ct=v(Ve);Le=p(Ct,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),F(Le)!=="svelte-vhfphu"&&(Le.textContent=Ot),Vt=D(Ct),Ae=p(Ct,"TEXTAREA",{id:!0,placeholder:!0,rows:!0,class:!0}),v(Ae).forEach(d),Ct.forEach(d),Lt=D(he),We=p(he,"DIV",{class:!0});var Et=v(We);Xe=p(Et,"BUTTON",{class:!0,"data-svelte-h":!0}),F(Xe)!=="svelte-1q6juk2"&&(Xe.textContent=Ut),At=D(Et),Ye=p(Et,"BUTTON",{class:!0,"data-svelte-h":!0}),F(Ye)!=="svelte-fcvg55"&&(Ye.textContent=qt),Et.forEach(d),he.forEach(d),gt.forEach(d),pe.forEach(d),this.h()},h(){o(s,"class","text-xl font-bold text-white"),o(i,"class","text-gray-400 hover:text-white"),o(t,"class","flex items-center justify-between mb-6"),o(x,"class","text-lg font-semibold text-white"),o(y,"class",w="w-3 h-3 rounded-full "+(n[5].connected?"bg-green-500":"bg-red-500")),o(A,"class","text-sm text-gray-400"),o(k,"class","flex items-center space-x-2"),o(m,"class","flex items-center justify-between"),o(j,"for","vllm-url"),o(j,"class","block text-sm font-medium text-gray-300"),o(M,"id","vllm-url"),o(M,"type","url"),o(M,"placeholder","http://localhost:8000/v1"),o(M,"class","w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:border-blue-500"),o(R,"class","text-xs text-gray-500"),o(B,"class","space-y-2"),o(G,"for","api-key"),o(G,"class","block text-sm font-medium text-gray-300"),o(I,"id","api-key"),o(I,"type","password"),o(I,"placeholder","Enter API key if required"),o(I,"class","w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:border-blue-500"),o(q,"class","space-y-2"),$.disabled=re=n[3]||!n[4].vllmApiUrl.trim(),o($,"class","px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-600 disabled:cursor-not-allowed text-white rounded-lg transition-colors flex items-center space-x-2"),o(ae,"class","px-4 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-lg transition-colors"),o(P,"class","flex space-x-3"),o(U,"for","temperature"),o(U,"class","block text-sm font-medium text-gray-300"),o(ie,"id","temperature"),o(ie,"type","range"),o(ie,"min","0"),o(ie,"max","2"),o(ie,"step","0.1"),o(ie,"class","w-full"),o(Ie,"class","space-y-2"),o(Se,"for","max-tokens"),o(Se,"class","block text-sm font-medium text-gray-300"),o(_e,"id","max-tokens"),o(_e,"type","number"),o(_e,"min","1"),o(_e,"max","8192"),o(_e,"class","w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:border-blue-500"),o(we,"class","space-y-2"),o(Te,"class","grid grid-cols-1 md:grid-cols-2 gap-4"),o(Le,"for","system-prompt"),o(Le,"class","block text-sm font-medium text-gray-300"),o(Ae,"id","system-prompt"),o(Ae,"placeholder","Enter system prompt (optional)"),o(Ae,"rows","3"),o(Ae,"class","w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:border-blue-500 resize-none"),o(Ve,"class","space-y-2"),o(Xe,"class","px-4 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-lg transition-colors"),o(Ye,"class","px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-colors"),o(We,"class","flex justify-end space-x-3 pt-4 border-t border-gray-700"),o(h,"class","space-y-6"),o(r,"class","bg-gray-800 rounded-lg p-6 w-full max-w-4xl max-h-[80vh] overflow-y-auto"),o(e,"class","fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50")},m(Ke,pe){L(Ke,e,pe),c(e,r),c(r,t),c(t,s),c(t,a),c(t,i),c(r,f),c(r,h),c(h,m),c(m,x),c(m,_),c(m,k),c(k,y),c(k,C),c(k,A),c(A,E),c(h,V),c(h,B),c(B,j),c(B,H),c(B,M),be(M,n[4].vllmApiUrl),c(B,O),c(B,R),c(h,K),c(h,q),c(q,G),c(q,oe),c(q,I),be(I,n[4].vllmApiKey),c(h,T),c(h,P),c(P,$),Je.m($,null),c(P,fe),c(P,ae),c(h,te),me&&me.m(h,null),c(h,ye),ve&&ve.m(h,null),c(h,Me),c(h,Te),c(Te,Ie),c(Ie,U),c(U,se),c(U,ke),c(Ie,Be),c(Ie,ie),be(ie,n[4].temperature),c(Te,Ge),c(Te,we),c(we,Se),c(we,nt),c(we,_e),be(_e,n[4].maxTokens),c(h,at),c(h,Ve),c(Ve,Le),c(Ve,Vt),c(Ve,Ae),be(Ae,n[4].systemPrompt),c(h,Lt),c(h,We),c(We,Xe),c(We,At),c(We,Ye),Bt||(zt=[X(i,"click",function(){Ht(n[1])&&n[1].apply(this,arguments)}),X(M,"input",n[9]),X(I,"input",n[10]),X($,"click",n[6]),X(ae,"click",n[8]),X(ie,"change",n[12]),X(ie,"input",n[12]),X(_e,"input",n[13]),X(Ae,"input",n[14]),X(Xe,"click",function(){Ht(n[1])&&n[1].apply(this,arguments)}),X(Ye,"click",n[7])],Bt=!0)},p(Ke,pe){n=Ke,pe&32&&w!==(w="w-3 h-3 rounded-full "+(n[5].connected?"bg-green-500":"bg-red-500"))&&o(y,"class",w),pe&32&&N!==(N=n[5].connected?"Connected":"Disconnected")&&ne(E,N),pe&20&&M.value!==n[4].vllmApiUrl&&be(M,n[4].vllmApiUrl),pe&20&&I.value!==n[4].vllmApiKey&&be(I,n[4].vllmApiKey),pt!==(pt=Rt(n))&&(Je.d(1),Je=pt(n),Je&&(Je.c(),Je.m($,null))),pe&28&&re!==(re=n[3]||!n[4].vllmApiUrl.trim())&&($.disabled=re),n[5].error?me?me.p(n,pe):(me=xr(n),me.c(),me.m(h,ye)):me&&(me.d(1),me=null),n[5].connected&&n[2].length>0?ve?ve.p(n,pe):(ve=Cr(n),ve.c(),ve.m(h,Me)):ve&&(ve.d(1),ve=null),pe&16&&De!==(De=n[4].temperature+"")&&ne(ke,De),pe&20&&be(ie,n[4].temperature),pe&20&&Pt(_e.value)!==n[4].maxTokens&&be(_e,n[4].maxTokens),pe&20&&be(Ae,n[4].systemPrompt)},d(Ke){Ke&&d(e),Je.d(),me&&me.d(),ve&&ve.d(),Bt=!1,ct(zt)}}}function Xs(n){let e,r,t,s,l="Test Connection";return{c(){e=ue("svg"),r=ue("path"),t=S(),s=g("span"),s.textContent=l,this.h()},l(a){e=de(a,"svg",{class:!0,fill:!0,stroke:!0,viewBox:!0});var i=v(e);r=de(i,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),v(r).forEach(d),i.forEach(d),t=D(a),s=p(a,"SPAN",{"data-svelte-h":!0}),F(s)!=="svelte-l5wddi"&&(s.textContent=l),this.h()},h(){o(r,"stroke-linecap","round"),o(r,"stroke-linejoin","round"),o(r,"stroke-width","2"),o(r,"d","M13 10V3L4 14h7v7l9-11h-7z"),o(e,"class","w-4 h-4"),o(e,"fill","none"),o(e,"stroke","currentColor"),o(e,"viewBox","0 0 24 24")},m(a,i){L(a,e,i),c(e,r),L(a,t,i),L(a,s,i)},d(a){a&&(d(e),d(t),d(s))}}}function Ys(n){let e,r,t,s="Testing...";return{c(){e=g("div"),r=S(),t=g("span"),t.textContent=s,this.h()},l(l){e=p(l,"DIV",{class:!0}),v(e).forEach(d),r=D(l),t=p(l,"SPAN",{"data-svelte-h":!0}),F(t)!=="svelte-1knivo8"&&(t.textContent=s),this.h()},h(){o(e,"class","w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin")},m(l,a){L(l,e,a),L(l,r,a),L(l,t,a)},d(l){l&&(d(e),d(r),d(t))}}}function xr(n){let e,r,t='<svg class="w-5 h-5 text-red-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <span class="text-red-400 text-sm">Connection Error</span>',s,l,a=n[5].error+"",i;return{c(){e=g("div"),r=g("div"),r.innerHTML=t,s=S(),l=g("p"),i=Z(a),this.h()},l(u){e=p(u,"DIV",{class:!0});var f=v(e);r=p(f,"DIV",{class:!0,"data-svelte-h":!0}),F(r)!=="svelte-1iw8ipj"&&(r.innerHTML=t),s=D(f),l=p(f,"P",{class:!0});var h=v(l);i=Q(h,a),h.forEach(d),f.forEach(d),this.h()},h(){o(r,"class","flex items-center space-x-2"),o(l,"class","text-red-300 text-sm mt-1"),o(e,"class","p-3 bg-red-900/50 border border-red-700 rounded-lg")},m(u,f){L(u,e,f),c(e,r),c(e,s),c(e,l),c(l,i)},p(u,f){f&32&&a!==(a=u[5].error+"")&&ne(i,a)},d(u){u&&d(e)}}}function Cr(n){let e,r,t="Select Model",s,l,a,i,u=n[2].length+"",f,h,m,x,b=tt(n[2]),_=[];for(let k=0;k<b.length;k+=1)_[k]=Er(yr(n,b,k));return{c(){e=g("div"),r=g("label"),r.textContent=t,s=S(),l=g("select");for(let k=0;k<_.length;k+=1)_[k].c();a=S(),i=g("p"),f=Z(u),h=Z(" model(s) available"),this.h()},l(k){e=p(k,"DIV",{class:!0});var y=v(e);r=p(y,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),F(r)!=="svelte-1jkr3he"&&(r.textContent=t),s=D(y),l=p(y,"SELECT",{id:!0,class:!0});var w=v(l);for(let A=0;A<_.length;A+=1)_[A].l(w);w.forEach(d),a=D(y),i=p(y,"P",{class:!0});var C=v(i);f=Q(C,u),h=Q(C," model(s) available"),C.forEach(d),y.forEach(d),this.h()},h(){o(r,"for","model-select"),o(r,"class","block text-sm font-medium text-gray-300"),o(l,"id","model-select"),o(l,"class","w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:border-blue-500"),n[4].model===void 0&&It(()=>n[11].call(l)),o(i,"class","text-xs text-gray-500"),o(e,"class","space-y-2")},m(k,y){L(k,e,y),c(e,r),c(e,s),c(e,l);for(let w=0;w<_.length;w+=1)_[w]&&_[w].m(l,null);Wt(l,n[4].model,!0),c(e,a),c(e,i),c(i,f),c(i,h),m||(x=X(l,"change",n[11]),m=!0)},p(k,y){if(y&4){b=tt(k[2]);let w;for(w=0;w<b.length;w+=1){const C=yr(k,b,w);_[w]?_[w].p(C,y):(_[w]=Er(C),_[w].c(),_[w].m(l,null))}for(;w<_.length;w+=1)_[w].d(1);_.length=b.length}y&20&&Wt(l,k[4].model),y&4&&u!==(u=k[2].length+"")&&ne(f,u)},d(k){k&&d(e),Vr(_,k),m=!1,x()}}}function Er(n){let e,r=n[16].id+"",t,s;return{c(){e=g("option"),t=Z(r),this.h()},l(l){e=p(l,"OPTION",{});var a=v(e);t=Q(a,r),a.forEach(d),this.h()},h(){e.__value=s=n[16].id,be(e,e.__value)},m(l,a){L(l,e,a),c(e,t)},p(l,a){a&4&&r!==(r=l[16].id+"")&&ne(t,r),a&4&&s!==(s=l[16].id)&&(e.__value=s,be(e,e.__value))},d(l){l&&d(e)}}}function Qs(n){let e,r=n[0]&&wr(n);return{c(){r&&r.c(),e=Ee()},l(t){r&&r.l(t),e=Ee()},m(t,s){r&&r.m(t,s),L(t,e,s)},p(t,[s]){t[0]?r?r.p(t,s):(r=wr(t),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null)},i:ce,o:ce,d(t){t&&d(e),r&&r.d(t)}}}function Zs(n,e,r){let t,s;ge(n,xe,C=>r(4,t=C)),ge(n,Ze,C=>r(5,s=C));let{isOpen:l=!1}=e,{onClose:a}=e,i=[],u=!1;async function f(){if(!t.vllmApiUrl.trim()){Ce.error("Please enter VLLM API URL");return}r(3,u=!0);try{const C=await Qe.testVllmConnection(t.vllmApiUrl,t.vllmApiKey);if(C.success&&C.data)r(2,i=C.data.models||[]),Ze.set({connected:!0,error:void 0,models:i}),i.length>0&&(!t.model||t.model==="default")&&xe.update(A=>({...A,model:i[0].id})),Ce.success("Successfully connected to VLLM!");else throw new Error(C.error||"Failed to connect")}catch(C){console.error("Connection test failed:",C),Ze.set({connected:!1,error:C instanceof Error?C.message:"Connection failed",models:[]}),Ce.error(`Connection failed: ${C instanceof Error?C.message:"Unknown error"}`)}finally{r(3,u=!1)}}function h(){localStorage.setItem("vllm-chat-settings",JSON.stringify(t)),Ce.success("Settings saved"),a()}function m(){xe.update(C=>({...C,vllmApiUrl:"http://localhost:8000/v1",vllmApiKey:"",model:"default"})),Ze.set({connected:!1,error:void 0,models:[]}),r(2,i=[])}St(()=>{const C=localStorage.getItem("vllm-chat-settings");if(C)try{const A=JSON.parse(C);xe.update(N=>({...N,...A}))}catch(A){console.error("Failed to load saved settings:",A)}});function x(){t.vllmApiUrl=this.value,xe.set(t),r(2,i)}function b(){t.vllmApiKey=this.value,xe.set(t),r(2,i)}function _(){t.model=Hr(this),xe.set(t),r(2,i)}function k(){t.temperature=Pt(this.value),xe.set(t),r(2,i)}function y(){t.maxTokens=Pt(this.value),xe.set(t),r(2,i)}function w(){t.systemPrompt=this.value,xe.set(t),r(2,i)}return n.$$set=C=>{"isOpen"in C&&r(0,l=C.isOpen),"onClose"in C&&r(1,a=C.onClose)},[l,a,i,u,t,s,f,h,m,x,b,_,k,y,w]}class $s extends Ue{constructor(e){super(),qe(this,e,Zs,Qs,ze,{isOpen:0,onClose:1})}}function Mr(n){let e,r,t;return{c(){e=g("div"),this.h()},l(s){e=p(s,"DIV",{class:!0}),v(e).forEach(d),this.h()},h(){o(e,"class","fixed inset-0 bg-black bg-opacity-50 z-40")},m(s,l){L(s,e,l),r||(t=X(e,"click",n[14]),r=!0)},d(s){s&&d(e),r=!1,t()}}}function Tr(n){let e,r='<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>',t,s;return{c(){e=g("button"),e.innerHTML=r,this.h()},l(l){e=p(l,"BUTTON",{class:!0,"data-svelte-h":!0}),F(e)!=="svelte-xs7rjj"&&(e.innerHTML=r),this.h()},h(){o(e,"class","p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-600 dark:text-gray-300")},m(l,a){L(l,e,a),t||(s=X(e,"click",n[15]),t=!0)},d(l){l&&d(e),t=!1,s()}}}function el(n){var Ie;let e,r,t,s,l,a,i,u,f,h,m,x,b,_=(((Ie=n[7])==null?void 0:Ie.title)||"VLLM Chat")+"",k,y,w,C,A,N,E,V,B,j,z=(n[4].connected?n[2].model:"No Model")+"",H,M,O,R,J,K,q,G,Y,oe,I,T,P,$,re,fe,ae;t=new $r({props:{onNewChat:n[9],onSelectChat:n[10]}});let W=n[6]&&n[5]&&Mr(n),te=n[6]&&Tr(n),ye={chatId:n[3]};Y=new Os({props:ye}),n[16](Y),I=new Ws({props:{disabled:n[8]}}),I.$on("send",n[11]),I.$on("stop",n[12]),I.$on("openModelSettings",n[17]);function Me(U){n[19](U)}let Te={onClose:n[18]};return n[1]!==void 0&&(Te.isOpen=n[1]),P=new $s({props:Te}),ht.push(()=>Dr(P,"isOpen",Me)),{c(){e=g("div"),r=g("div"),Oe(t.$$.fragment),l=S(),W&&W.c(),a=S(),i=g("div"),u=g("div"),f=g("div"),h=g("div"),te&&te.c(),m=S(),x=g("div"),b=g("h1"),k=Z(_),y=S(),w=g("div"),C=g("div"),N=S(),E=ue("svg"),V=ue("path"),B=S(),j=g("span"),H=Z(z),M=S(),O=g("div"),R=g("button"),J=ue("svg"),K=ue("path"),G=S(),Oe(Y.$$.fragment),oe=S(),Oe(I.$$.fragment),T=S(),Oe(P.$$.fragment),this.h()},l(U){e=p(U,"DIV",{class:!0});var se=v(e);r=p(se,"DIV",{class:!0});var De=v(r);Pe(t.$$.fragment,De),De.forEach(d),l=D(se),W&&W.l(se),a=D(se),i=p(se,"DIV",{class:!0});var ke=v(i);u=p(ke,"DIV",{class:!0});var Be=v(u);f=p(Be,"DIV",{class:!0});var ie=v(f);h=p(ie,"DIV",{class:!0});var Ge=v(h);te&&te.l(Ge),m=D(Ge),x=p(Ge,"DIV",{class:!0});var we=v(x);b=p(we,"H1",{class:!0});var Se=v(b);k=Q(Se,_),Se.forEach(d),y=D(we),w=p(we,"DIV",{class:!0});var Fe=v(w);C=p(Fe,"DIV",{class:!0}),v(C).forEach(d),N=D(Fe),E=de(Fe,"svg",{class:!0,fill:!0,stroke:!0,viewBox:!0});var nt=v(E);V=de(nt,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),v(V).forEach(d),nt.forEach(d),B=D(Fe),j=p(Fe,"SPAN",{class:!0});var _e=v(j);H=Q(_e,z),_e.forEach(d),Fe.forEach(d),we.forEach(d),Ge.forEach(d),M=D(ie),O=p(ie,"DIV",{class:!0});var at=v(O);R=p(at,"BUTTON",{class:!0,title:!0});var Ve=v(R);J=de(Ve,"svg",{class:!0,fill:!0,stroke:!0,viewBox:!0});var Le=v(J);K=de(Le,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),v(K).forEach(d),Le.forEach(d),Ve.forEach(d),at.forEach(d),ie.forEach(d),Be.forEach(d),G=D(ke),Pe(Y.$$.fragment,ke),oe=D(ke),Pe(I.$$.fragment,ke),ke.forEach(d),se.forEach(d),T=D(U),Pe(P.$$.fragment,U),this.h()},h(){o(r,"class",s=(n[5]?"translate-x-0":"-translate-x-full")+" "+(n[6]?"fixed inset-y-0 left-0 z-50 w-80":"relative w-80")+" transition-transform duration-300 ease-in-out"),o(b,"class","text-lg font-semibold text-gray-900 dark:text-white"),o(C,"class",A="w-2 h-2 rounded-full "+(n[4].connected?"bg-green-500":"bg-red-500")),o(V,"stroke-linecap","round"),o(V,"stroke-linejoin","round"),o(V,"stroke-width","2"),o(V,"d","M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"),o(E,"class","w-4 h-4 text-gray-500 dark:text-gray-400"),o(E,"fill","none"),o(E,"stroke","currentColor"),o(E,"viewBox","0 0 24 24"),o(j,"class","text-sm font-medium text-gray-700 dark:text-gray-300"),o(w,"class","flex items-center space-x-2 px-3 py-1.5 bg-gray-100 dark:bg-gray-700 rounded-lg"),o(x,"class","flex items-center space-x-3"),o(h,"class","flex items-center space-x-3"),o(K,"stroke-linecap","round"),o(K,"stroke-linejoin","round"),o(K,"stroke-width","2"),o(K,"d","M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"),o(J,"class","w-5 h-5"),o(J,"fill","none"),o(J,"stroke","currentColor"),o(J,"viewBox","0 0 24 24"),o(R,"class",q="p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-600 dark:text-gray-300 "+(n[4].connected?"":"bg-red-100 dark:bg-red-900/20 text-red-600 dark:text-red-400")),o(R,"title","Model Settings"),o(O,"class","flex items-center space-x-2"),o(f,"class","flex items-center justify-between"),o(u,"class","border-b border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 p-4"),o(i,"class","flex-1 flex flex-col min-w-0"),o(e,"class","flex h-screen bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-white transition-colors")},m(U,se){L(U,e,se),c(e,r),He(t,r,null),c(e,l),W&&W.m(e,null),c(e,a),c(e,i),c(i,u),c(u,f),c(f,h),te&&te.m(h,null),c(h,m),c(h,x),c(x,b),c(b,k),c(x,y),c(x,w),c(w,C),c(w,N),c(w,E),c(E,V),c(w,B),c(w,j),c(j,H),c(f,M),c(f,O),c(O,R),c(R,J),c(J,K),c(i,G),He(Y,i,null),c(i,oe),He(I,i,null),L(U,T,se),He(P,U,se),re=!0,fe||(ae=X(R,"click",n[13]),fe=!0)},p(U,[se]){var ie;(!re||se&96&&s!==(s=(U[5]?"translate-x-0":"-translate-x-full")+" "+(U[6]?"fixed inset-y-0 left-0 z-50 w-80":"relative w-80")+" transition-transform duration-300 ease-in-out"))&&o(r,"class",s),U[6]&&U[5]?W||(W=Mr(U),W.c(),W.m(e,a)):W&&(W.d(1),W=null),U[6]?te||(te=Tr(U),te.c(),te.m(h,m)):te&&(te.d(1),te=null),(!re||se&128)&&_!==(_=(((ie=U[7])==null?void 0:ie.title)||"VLLM Chat")+"")&&ne(k,_),(!re||se&16&&A!==(A="w-2 h-2 rounded-full "+(U[4].connected?"bg-green-500":"bg-red-500")))&&o(C,"class",A),(!re||se&20)&&z!==(z=(U[4].connected?U[2].model:"No Model")+"")&&ne(H,z),(!re||se&16&&q!==(q="p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-600 dark:text-gray-300 "+(U[4].connected?"":"bg-red-100 dark:bg-red-900/20 text-red-600 dark:text-red-400")))&&o(R,"class",q);const De={};se&8&&(De.chatId=U[3]),Y.$set(De);const ke={};se&256&&(ke.disabled=U[8]),I.$set(ke);const Be={};se&2&&(Be.onClose=U[18]),!$&&se&2&&($=!0,Be.isOpen=U[1],Sr(()=>$=!1)),P.$set(Be)},i(U){re||(ee(t.$$.fragment,U),ee(Y.$$.fragment,U),ee(I.$$.fragment,U),ee(P.$$.fragment,U),re=!0)},o(U){le(t.$$.fragment,U),le(Y.$$.fragment,U),le(I.$$.fragment,U),le(P.$$.fragment,U),re=!1},d(U){U&&(d(e),d(T)),je(t),W&&W.d(),te&&te.d(),n[16](null),je(Y),je(I),je(P,U),fe=!1,ae()}}}function tl(n,e,r){let t,s,l,a,i,u,f,h;ge(n,xe,M=>r(2,t=M)),ge(n,Dt,M=>r(3,s=M)),ge(n,ut,M=>r(21,l=M)),ge(n,Ze,M=>r(4,a=M)),ge(n,Tt,M=>r(5,i=M)),ge(n,rr,M=>r(6,u=M)),ge(n,tr,M=>r(7,f=M)),ge(n,dt,M=>r(8,h=M));let m,x=null,b=!1;async function _(){console.log("Creating new chat with settings:",t);try{const M=await Qe.createChat({title:"New Chat",model:t.model,temperature:t.temperature,max_tokens:t.maxTokens,system_prompt:t.systemPrompt});if(console.log("Create chat response:",M),M.success&&M.data){const O=M.data;Mt.update(R=>[O,...R]),await k(O.id),console.log("New chat created successfully:",O.id)}else console.error("Failed to create chat:",M.error),Ce.error("Failed to create new chat: "+(M.error||"Unknown error"))}catch(M){console.error("Error creating chat:",M),Ce.error("Error creating chat: "+M)}}async function k(M){Dt.set(M);const O=await Qe.getChat(M);O.success&&O.data?(tr.set(O.data),ut.set(O.data.messages||[])):Ce.error("Failed to load chat")}async function y(M){var J,K;const O=M.detail.content;if(console.log("Sending message:",O),!a.connected){Ce.error("No model connected. Please configure a model first."),r(1,b=!0);return}if(s||(console.log("No current chat, creating new chat..."),await _()),!s){console.error("Failed to create or get chat ID"),Ce.error("Failed to create chat");return}console.log("Using chat ID:",s);const R={id:Jr(),chat_id:s,role:"user",content:O,timestamp:Math.floor(Date.now()/1e3)};ut.update(q=>[...q,R]),dt.set(!0);try{await Qe.addMessage(s,{role:"user",content:O,timestamp:R.timestamp});const q=l.map(T=>({role:T.role,content:T.content})),G={model:t.model,messages:q,temperature:t.temperature,max_tokens:t.maxTokens,stream:!0,chat_id:s,vllm_url:t.vllmApiUrl,vllm_api_key:t.vllmApiKey};dt.set(!1),ft.set(!0),x=new AbortController;const Y=await Qe.chatCompletionStream(G);if(!Y)throw new Error("Failed to start streaming");const oe=Y.getReader(),I=new TextDecoder;try{for(;;){const{done:T,value:P}=await oe.read();if(T)break;const re=I.decode(P).split(`
`);for(const fe of re)if(fe.startsWith("data: ")){const ae=fe.slice(6);if(ae==="[DONE]"){m==null||m.finishStreaming();break}try{const W=JSON.parse(ae);W.choices&&((K=(J=W.choices[0])==null?void 0:J.delta)!=null&&K.content)&&(m==null||m.addStreamingContent(W.choices[0].delta.content,W.message_id))}catch{}}}}finally{oe.releaseLock()}}catch(q){console.error("Error sending message:",q),Ce.error("Failed to send message"),m==null||m.clearStreaming()}finally{dt.set(!1),ft.set(!1),x=null}}function w(){x&&(x.abort(),x=null),ft.set(!1),m==null||m.finishStreaming()}function C(){rr.set(window.innerWidth<768)}function A(){r(1,b=!0)}async function N(){const M=localStorage.getItem("vllm-chat-settings");if(M)try{const O=JSON.parse(M);if(xe.update(R=>({...R,...O})),O.vllmApiUrl){const R=await Qe.testVllmConnection(O.vllmApiUrl,O.vllmApiKey);R.success&&R.data?Ze.set({connected:!0,error:void 0,models:R.data.models||[]}):Ze.set({connected:!1,error:R.error||"Connection failed",models:[]})}}catch(O){console.error("Failed to load saved settings:",O)}}St(()=>(C(),window.addEventListener("resize",C),N(),()=>{window.removeEventListener("resize",C)})),Pr(()=>{x&&x.abort()});const E=()=>Tt.set(!1),V=()=>Tt.set(!0);function B(M){ht[M?"unshift":"push"](()=>{m=M,r(0,m)})}const j=()=>r(1,b=!0),z=()=>r(1,b=!1);function H(M){b=M,r(1,b)}return[m,b,t,s,a,i,u,f,h,_,k,y,w,A,E,V,B,j,z,H]}class rl extends Ue{constructor(e){super(),qe(this,e,tl,el,ze,{})}}function sl(n){let e,r,t,s;return t=new rl({}),{c(){e=g("meta"),r=S(),Oe(t.$$.fragment),this.h()},l(l){const a=Or("svelte-ipwlj6",document.head);e=p(a,"META",{name:!0,content:!0}),a.forEach(d),r=D(l),Pe(t.$$.fragment,l),this.h()},h(){document.title="VLLM Chat",o(e,"name","description"),o(e,"content","Chat interface for VLLM inference")},m(l,a){c(document.head,e),L(l,r,a),He(t,l,a),s=!0},p:ce,i(l){s||(ee(t.$$.fragment,l),s=!0)},o(l){le(t.$$.fragment,l),s=!1},d(l){l&&d(r),d(e),je(t,l)}}}class dl extends Ue{constructor(e){super(),qe(this,e,null,sl,ze,{})}}export{dl as component};
